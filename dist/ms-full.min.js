function MSAPIClient(e){this.baseUrl="",this.useProxy=!1,this.extraData=null,this.defaultsErrorsMessages={401:jsu.translate("You are not logged in or your session has expired. Please login and retry."),403:jsu.translate("Access denied."),404:jsu.translate("Item not found."),500:jsu.translate("An internal server error occurred. An email has been sent to the support team."),timeout:jsu.translate("The connection timed out. Please retry later."),unreachable:jsu.translate("The server cannot be reached.")},this.calls={ping:{method:"GET",url:"/api/v2/"},search:{method:"GET",url:"/api/v2/search/",errors:{403:jsu.translate("Unable to get search's results content because you cannot access to this channel."),404:jsu.translate("Requested channel does not exist.")}},getLatestContent:{method:"GET",url:"/api/v2/latest/"},getChannelsList:{method:"GET",url:"/api/v2/channels/"},getChannelsContent:{method:"GET",url:"/api/v2/channels/content/",errors:{403:jsu.translate("Unable to get channel content because you cannot access to this channel."),404:jsu.translate("Requested channel does not exist.")}},getChannels:{method:"GET",url:"/api/v2/channels/get/",errors:{403:jsu.translate("Unable to get channel information because you cannot access to this channel."),404:jsu.translate("Requested channel does not exist.")}},getChannelsTree:{method:"GET",url:"/api/v2/channels/tree/",errors:{403:jsu.translate("Unable to get channels tree because you cannot access to this channel."),404:jsu.translate("Requested channel does not exist.")}},getChannelsPath:{method:"GET",url:"/api/v2/channels/path/",errors:{403:jsu.translate("Unable to get channels path because you cannot access to this channel."),404:jsu.translate("Requested channel does not exist.")}},getChannelsPersonal:{method:"GET",url:"/api/v2/channels/personal/"},getMediasList:{method:"GET",url:"/api/v2/medias/"},getMedias:{method:"GET",url:"/api/v2/medias/get/",errors:{403:jsu.translate("Unable to get media information because you cannot access to this media."),404:jsu.translate("Media does not exist.")}},addMedias:{method:"POST",url:"/api/v2/medias/add/"},mediasResourcesCheck:{method:"POST",url:"/api/v2/medias/resources-check/"},mediasTrimmingChildInit:{method:"POST",url:"/api/v2/medias/trimming-child-init/"},mediasGetUploadConfig:{method:"GET",url:"/api/v2/medias/get-upload-config/"},getLivesList:{method:"GET",url:"/api/v2/lives/"},prepareLives:{method:"POST",url:"/api/v2/lives/prepare/"},startLives:{method:"POST",url:"/api/v2/lives/start/"},stopLives:{method:"POST",url:"/api/v2/lives/stop/",errors:{403:jsu.translate("You are not allowed to perform this action."),404:jsu.translate("Media does not exist.")}},livesChangeSlides:{method:"POST",url:"/api/v2/lives/change-slide/"},livesChangeStatus:{method:"POST",url:"/api/v2/lives/change-status/"},livesGetViewers:{method:"GET",url:"/api/v2/lives/get-viewers/"},listMediaAnnotations:{method:"GET",url:"/api/v2/annotations/list/"},listMediaUserAnnotations:{method:"GET",url:"/api/v2/annotations/list/moderate/"},listAnnotationsTypes:{method:"GET",url:"/api/v2/annotations/types/list/"},voteForAnnotation:{method:"POST",url:"/api/v2/annotations/vote/"},postAnnotation:{method:"POST",url:"/api/v2/annotations/post/"},validateAnnotation:{method:"POST",url:"/api/v2/annotations/validate/"},unvalidateAnnotation:{method:"POST",url:"/api/v2/annotations/unvalidate/"},deleteAnnotation:{method:"POST",url:"/api/v2/annotations/delete/"},listMediaSlides:{method:"GET",url:"/api/v2/annotations/slides/list/"},listMediaResources:{method:"GET",url:"/api/v2/annotations/resources/list/"},listMediaChapters:{method:"GET",url:"/api/v2/annotations/chapters/list/"},listMediaActivities:{method:"GET",url:"/api/v2/annotations/activities/list/"},emailNotification:{method:"POST",url:"/api/v2/annotations/notification/"},searchAnnotations:{method:"GET",url:"/api/v2/annotations/search/"},listCategories:{method:"GET",url:"/api/v2/categories/"}},this.configure(e)}function MSBrowserChannels(e){this.browser=null,this.displayItunesRss=!1,this.currentChannelOid="0",this.$menu=null,this.$content=null,this.treeManager=null,this.order="default",this.lastResponse=null,jsu.setObjectAttributes(this,e,["browser","displayItunesRss","currentChannelOid"]),this.initOptions=e||{}}function MSBrowserLatest(e){this.browser=null,this.$menu=null,this.$content=null,this.$place=null,this.lastResponse=null,this.more=!1,this.startDate="",this.dateLabel="",this.$section=null,jsu.setObjectAttributes(this,e,["browser"]),this.initOptions=e||{}}function MSBrowserSearch(e){if(this.browser=null,this.$menu=null,this.$content=null,this.order="default",this.lastResponse=null,this.searchInFields=[{name:"in_title",label:jsu.translateHTML("titles"),initial:!0,items:null},{name:"in_description",label:jsu.translateHTML("descriptions"),initial:!1,items:null},{name:"in_keywords",label:jsu.translateHTML("keywords"),initial:!0,items:null},{name:"in_speaker",label:jsu.translateHTML("speakers"),initial:!0,items:"vlp"},{name:"in_license",label:jsu.translateHTML("licenses"),initial:!1,items:"vlp"},{name:"in_company",label:jsu.translateHTML("companies"),initial:!1,items:"vlp"},{name:"in_location",label:jsu.translateHTML("locations"),initial:!1,items:"vlp"},{name:"in_categories",label:jsu.translateHTML("categories"),initial:!1,items:"vlp"},{name:"in_annotations",label:jsu.translateHTML("comments, slides, ..."),initial:!1,items:"vlp"},{name:"in_photos",label:jsu.translateHTML("photos"),initial:!1,items:"p"},{name:"in_extref",label:jsu.translateHTML("external references"),initial:!0,items:null},{name:"in_extdata",label:jsu.translateHTML("external data"),initial:!1,items:null}],e.defaultSearchIn)for(let t=0;t<this.searchInFields.length;t++){const s=this.searchInFields[t].name.replace("in_","");-1!==e.defaultSearchIn.indexOf(s)?this.searchInFields[t].initial=!0:this.searchInFields[t].initial=!1}this.searchForFields=[{name:"for_channels",label:jsu.translateHTML("channels"),initial:!0,items:"c"},{name:"for_videos",label:jsu.translateHTML("videos"),initial:!0,items:"v"},{name:"for_lives",label:jsu.translateHTML("live streams"),initial:!0,items:"l"},{name:"for_photos",label:jsu.translateHTML("photos groups"),initial:!0,items:"p"}],jsu.setObjectAttributes(this,e,["browser"]),this.initOptions=e||{}}function MSBrowser(e){if(this.title="",this.place=null,this.selectableContent="cvlp",this.displayableContent="cvlp",this.filterEditable=null,this.filterValidated=null,this.filterSpeaker=null,this.filterCategories=[],this.filterNoCategories=!1,this.parentSelectionOid=null,this.initialOid=null,this.initialState=null,this.onPick=null,this.hideHeader=!1,this.btnClass="",this.msapi=null,this.treeManager=!0,this.displayTypesIcons=!1,this.displayItunesRss=!0,this.useOverlay=!0,this.pickMode=!0,this.iframeMode=!1,this.ltiMode=!1,this.linksUrlParams="",this.linksTarget="",this.$widget=null,this.$menu=null,this.$main=null,this.overlay=null,this.catalog={},this.displayAsThumbnails=!1,this.displayed="channels",this.currentSelection=null,this.siteSettingsCategories=[],this.catalogFieldsToDisplay=["duration","description","creation_date","views","annotations","storage","rss_links","channel_content","add_date","type","parent"],this.urlLogin="/login/",this.urlChannels="/channels/",this.urlLatest="/latest/",this.urlSearch="/search/",this.urlPostLink="/lti/post-link/",this.defaultSearchIn=[],this.moreChannels=[],this.moreLiveStreams=[],this.moreVideos=[],this.morePhotosGroups=[],this.displayCount=jsu.getCookie("catalog-displayCount")||30,jsu.setObjectAttributes(this,e,["title","place","msapi","selectableContent","displayableContent","filterEditable","filterValidated","filterSpeaker","parentSelectionOid","initialOid","initialState","onPick","hideHeader","btnClass","treeManager","displayTypesIcons","displayItunesRss","defaultSearchIn","catalogFieldsToDisplay"]),this.msapi||(this.msapi=new MSAPIClient(e)),this.initOptions=e||{},this.useOverlay=!this.place,!this.useOverlay){const e=this;$(document).ready(function(){e.init()})}}function MSTreeManager(e){if(this.$place=null,this.msapi=null,this.displayRoot=!1,this.displayPersonal=!1,this.autoInit=!0,this.currentChannelOid="0",this.onChange=null,this.onDataRetrieved=null,this.onTreeLoaded=null,this.channelsBaseUrl="/channels/#",this.channelsUrlField="slug",this.treeUrl="",this.pathUrl="",this.$widget=null,this.loaded=!1,this.loading=!1,this.content={0:{oid:"0",parent_oid:null}},this.loadingQueue={},this.hasPersonalChannel=!1,this.personalChannelInfo=null,jsu.setObjectAttributes(this,e,["$place","msapi","displayRoot","displayPersonal","autoInit","currentChannelOid","onChange","onDataRetrieved","onTreeLoaded","channelsBaseUrl","channelsUrlField","treeUrl","pathUrl"]),this.initialOid=this.currentChannelOid,this.msapi||(this.msapi=new MSAPIClient(e)),this.autoInit){const e=this;$(document).ready(function(){e.init()})}}jsu.addTranslations({channel:"Kanal",video:"Video",live:"Live",photos:"Fotos",January:"Januar",February:"Februar",March:"März",April:"April",May:"Mai",June:"Juni",July:"Juli",August:"August",September:"September",October:"Oktober",November:"November",December:"Dezember",at:"am",B:"B","You are not logged in or your session has expired. Please login and retry.":"Sie sind nicht eingeloggt oder Ihre Sitzung ist abgelaufen Bitte melden Sie sich an und versuchen Sie es erneut.","Access denied.":"Zugriff verweigert.","Item not found.":"Objekt nicht gefunden.","An internal server error occurred. An email has been sent to the support team.":"Ein interner Server-Fehler ist aufgetreten. Eine E-Mail wurde an das Support-Team gesendet.","The connection timed out. Please retry later.":"Zeitüberschreitung der Verbindung. Bitte versuchen Sie es zu einem späteren Zeitpunkt erneut.","The server cannot be reached.":"Der Server kann nicht erreicht werden.","Unable to get search's results content because you cannot access to this channel.":"Der Inhalt der Suchergebnisse kann nicht abgerufen werden, da Sie nicht auf diesen Kanal zugreifen können.","Requested channel does not exist.":"Der angeforderte Kanal existiert nicht.","Unable to get channel content because you cannot access to this channel.":"Der Kanalinhalt kann nicht abgerufen werden, da Sie nicht auf diesen Kanal zugreifen können.","Unable to get channel information because you cannot access to this channel.":"Kanalinformationen können nicht abgerufen werden, da Sie nicht auf diesen Kanal zugreifen können.","Unable to get channels tree because you cannot access to this channel.":"Der Kanalbaum kann nicht abgerufen werden, da Sie nicht auf diesen Kanal zugreifen können.","Unable to get channels path because you cannot access to this channel.":"Der Kanalpfad kann nicht abgerufen werden, da Sie nicht auf diesen Kanal zugreifen können.","Unable to get media information because you cannot access to this media.":"Medieninformationen können nicht abgerufen werden, da Sie nicht auf dieses Medium zugreifen können.","Media does not exist.":"Die referenzierte Mediendatei existiert nicht.","You are not allowed to perform this action.":"Sie sind nicht berechtigt, diese Aktion durchzuführen.","No information about error.":"Keine Informationen zu diesem Fehler verfügbar.","Request failed:":"Anforderung fehlgeschlagen:","Available space:":"Verfügbarer Platz:","No available space":"Kein verfügbarer Platz",help:"Hilfe","The storage quota of the parent channels can have an impact on the available space of this channel.":"Das Speicherkontingent der übergeordneten Kanäle kann sich auf den verfügbaren Speicherplatz dieses Kanals auswirken.","Loading...":"Lädt …","Select a channel to display its content.":"Wählen Sie einen Kanal aus, um dessen Inhalt anzuzeigen.",Root:"Root","My channel":"Mein Kanal","Main channels":"Hauptkanäle","You are not allowed to have a personal channel.":"Sie dürfen keinen persönlichen Kanal haben.","Please login to access this channel":"Bitte melden Sie sich an, um auf diesen Kanal zuzugreifen","Sign in":"Anmelden","Parent channel":"Übergeordneter Kanal",views:"Aufrufe","this month":"diesen Monat",annotations:"Anmerkungen","channel(s)":"Kanal/Kanäle","video(s)":"Video(s)","live stream(s)":"Live-Stream(s)","photos group(s)":"Fotogruppe(n)","Channel content:":"Kanalinhalt:","Sub channels items are included in counts.":"Unterkanalelemente werden bei der Anzahl berücksichtigt.","Storage usage:":"Speicherauslastung:","Subscribe to channel videos RSS:":"Kanalvideos abonnieren (RSS):",standard:"Standard",iTunes:"iTunes","iTunes (audio only)":"iTunes (nur Audio)","Subscribe to channel videos RSS":"Kanalvideos abonnieren (RSS)","This channel contains no media.":"Dieser Kanal enthält keine Medien.","This channel contains no sub channels and no media.":"Dieser Kanal enthält keine Unterkanäle und keine Medien.","This channel contains no sub channels.":"Dieser Kanal enthält keine Unterkanäle.","Some contents may still exist in this channel but if it is the case your account is not allowed to see them.":"Einige Inhalte sind möglicherweise noch in diesem Kanal vorhanden. In diesem Fall dürfe Sie diese mit Ihrem Konto jedoch nicht anzeigen.","My media":"Meine Medien","Search in my media":"Suche in meinen Medien",Channels:"Kanäle","Latest content":"Neuester Inhalt",Search:"Suche","Display {count} more items":"Weitere {count} Elemente anzeigen","Use default sorting":"Standardsortierung verwenden","Creation date, descending":"Erstellungsdatum, absteigend","Creation date, ascending":"Erstellungsdatum, aufsteigend","Add date, descending":"Hinzufügungsdatum, absteigend","Add date, ascending":"Hinzufügungsdatum, aufsteigend","Title, descending":"Titel, absteigend","Title, ascending":"Titel, aufsteigend","Slug, descending":"Slug, absteigend","Slug, ascending":"Slug, aufsteigend","Number of views, descending":"Anzahl der Aufrufe, absteigend","Number of views, ascending":"Anzahl der Aufrufe, aufsteigend",Display:"Anzeige","Display mode:":"Anzeigemodus:",list:"Liste","selected setting":"ausgewählte Einstellung",thumbnails:"Vorschaubilder","Number of items:":"Anzahl an Elementen:","display items type icons":"Symbole für Anzeigetypen","Sort by:":"Sortieren nach:",unspecified:"unspezifiziert",yes:"ja",no:"nein","Filters:":"Filter:","Editable:":"Bearbeitbar:","Published:":"Veröffentlicht:","Speaker:":"Redner:",Ok:"OK","selected tab":"Ausgewählte Registerkarte","Sub channels":"Unterkanäle","Live streams":"Live-Streams",Videos:"Videos","Photos groups":"Fotogruppen",selected:"ausgewählt","Open information panel":"Informationstafel öffnen",Edit:"Bearbeiten","Click to select this media":"Klicken Sie, um dieses Medium auszuwählen","This item is a channel":"Dieses Element ist ein Kanal","This item is a photos group":"Dieses Element ist eine Fotogruppe","This item is a live stream":"Dieses Element ist ein Live-Stream","This item is a video":"Dieses Element ist ein Video","dynamic Rich Media":"Dynamic-Rich-Medium","classic Rich Media":"Classic-Rich-Medium","This channel is unlisted":"Dieser Kanal ist nicht gelistet","This media is not published":"Dieses Medium ist nicht veröffentlicht","This media is published and unlisted":"Dieses Medium ist veröffentlicht und nicht gelistet","This media is published":"Dieses Medium ist veröffentlicht","This video is not ready":"Dieses Video ist nicht bereit","Created on":"Erstellt am","Type:":"Typ:","Added on":"Hinzugefügt am","Parent channel:":"Übergeordneter Kanal:","Matching annotations:":"Passende Anmerkungen:","Matching photos:":"Passende Fotos:","This channel is selected":"Dieser Kanal ist ausgewählt","Select this channel":"Diesen Kanal auswählen","This media is selected":"Dieses Medium ist ausgewählt","Select this media":"Dieses Medium auswählen",Statistics:"Statistiken",Delete:"Löschen","Add a sub channel":"Unterkanal hinzufügen","Add a video":"Video hinzufügen","Copy LTI link":"LTI-Link kopieren",See:"Anzeigen",copied:"kopiert","cannot copy":"konnte nicht kopiert werden","failed to copy":"Kopieren fehlgeschlagen","Hide this window":"Dieses Fenster ausblenden","Media information":"Medieninformation","Recording date":"Aufzeichnungsdatum","Publishing date":"Erscheinungsdatum",Duration:"Dauer","Views last month":"Aufrufe im letzten Monat",Views:"Aufrufe","Annotations last month":"Anmerkungen im letzten Monat",Annotations:"Anmerkungen","Storage usage":"Speicherauslastung",Categories:"Kategorien",Unspecified:"Nicht spezifiziert","See statistics on this channel":"Statistiken zu diesem Kanal anzeigen","Content types":"Inhaltstypen","Content types to display:":"Anzuzeigende Inhaltstypen:",channels:"Kanäle",videos:"Videos","live streams":"Live-Streams","This list presents all media and channels ordered by add date.":"Diese Liste enthält alle Medien und Kanäle, sortiert nach dem Datum des Hinzufügens.","Latest content added":"Neueste Inhalte hinzugefügt","Please login to access this page":"Bitte melden Sie sich an, um auf diese Seite zuzugreifen","No contents.":"Keine Inhalte.",titles:"Titel",descriptions:"Beschreibungen",keywords:"Schlüsselwörter",speakers:"Sprecher",licenses:"Lizenzen",companies:"Unternehmen",locations:"Anmerkungen",categories:"Kategorien","comments, slides, ...":"Kommentare, Folien, …","external references":"Externe Referenzen","external data":"Externe Daten","photos groups":"Fotogruppen","Search:":"Suchen:",Go:"Los","Search in":"Suchen in",all:"alles",none:"keine","Search for":"Suche nach","Use the input above to search for something.":"Verwenden Sie die Eingabe oben, um eine Suche durchzuführen.","Search results for:":"Suchergebnisse für:","Matching items:":"Übereinstimmende Elemente:","No results.":"Keine Ergebnisse.",Loading:"Lädt","Unable to get channels tree because you are not logged in.":"Der Kanalbaum kann nicht abgerufen werden, da Sie nicht angemeldet sind.","Channel does not exist.":"Der Kanal existiert nicht.","An error occurred in the server. Please try again later.":"Auf dem Server ist ein Fehler aufgetreten. Bitte versuchen Sie es später erneut.","Unable to get channels tree. Request timed out.":"Der Kanalbaum kann nicht abgerufen werden. Die Anfrage ist abgelaufen.","An error occurred during request:":"Während der Anfrage ist ein Fehler aufgetreten:"},"de"),jsu.addTranslations({channel:"canale",video:"vídeo",live:"live",photos:"fotos",January:"Enero",February:"Febrero",March:"Marzo",April:"Abril",May:"Mayo",June:"Junio",July:"Julio",August:"Agosto",September:"Septiembre",October:"Octubre",November:"Noviembre",December:"Diciembre",at:"en",B:"B","You are not logged in or your session has expired. Please login and retry.":"No has iniciado sesión o la sesión ha caducado. Inicia sesión e inténtalo otra vez.","Access denied.":"Acceso denegado.","Item not found.":"No se ha encontrado el elemento.","An internal server error occurred. An email has been sent to the support team.":"Se ha producido un error interno del servidor. Se ha enviado un email al equipo de asistencia técnica.","The connection timed out. Please retry later.":"Se ha agotado el tiempo de conexión. Vuelve a intentarlo más tarde.","The server cannot be reached.":"No se puede acceder al servidor.","Unable to get search's results content because you cannot access to this channel.":"No es posible obtener el contenido de los resultados de la búsqueda porque no puedes acceder a este canal.","Requested channel does not exist.":"El canal solicitado no existe.","Unable to get channel content because you cannot access to this channel.":"No es posible obtener el contenido del canal porque no puedes acceder a este canal.","Unable to get channel information because you cannot access to this channel.":"No es posible obtener la información del canal porque no puedes acceder a este canal.","Unable to get channels tree because you cannot access to this channel.":"No es posible obtener el árbol del canal porque no puedes acceder a este canal.","Unable to get channels path because you cannot access to this channel.":"No es posible obtener la ruta del canal porque no puedes acceder a este canal.","Unable to get media information because you cannot access to this media.":"No es posible obtener la información del elemento multimedia porque no puedes acceder a este elemento multimedia.","Media does not exist.":"El elemento multimedia no existe.","You are not allowed to perform this action.":"No tienes permiso para realizar esta acción.","No information about error.":"No hay información sobre el error.","Request failed:":"Solicitud fallida:","Available space:":"Espacio disponible:","No available space":"No hay espacio disponible",help:"ayuda","The storage quota of the parent channels can have an impact on the available space of this channel.":"El cupo de almacenamiento de los canales matrices podría afectar al espacio disponible en este canal.","Loading...":"Cargando...","Select a channel to display its content.":"Selecciona un canal para mostrar su contenido.",Root:"Raíz","My channel":"Mi canal","Main channels":"Canales principales","You are not allowed to have a personal channel.":"No tienes permiso para tener un canal personal.","Please login to access this channel":"Inicia sesión para acceder a este canal","Sign in":"Iniciar sesión","Parent channel":"Canal matriz",views:"visualizaciones","this month":"este mes",annotations:"anotaciones","channel(s)":"canal(es)","video(s)":"vídeo(s)","live stream(s)":"transmisión(es) en directo","photos group(s)":"grupo(s) de fotos","Channel content:":"Contenido del canal:","Sub channels items are included in counts.":"Los elementos de los subcanales están incluidos en los recuentos.","Storage usage:":"Uso del almacenamiento:","Subscribe to channel videos RSS:":"Suscribirse a la RSS de los vídeos del canal:",standard:"estándar",iTunes:"iTunes","iTunes (audio only)":"iTunes (solo audio)","Subscribe to channel videos RSS":"Suscribirse a la RSS de los vídeos del canal","This channel contains no media.":"Este canal no contiene medios de comunicación.","This channel contains no sub channels and no media.":"Este canal no contiene subcanales ni medios.","This channel contains no sub channels.":"Este canal no contiene subcanales.","Some contents may still exist in this channel but if it is the case your account is not allowed to see them.":"Es posible que aún existan algunos contenidos en este canal, pero si es así, tu cuenta no tiene permiso para verlos.","My media":"Mis elementos multimedia","Search in my media":"Buscar en mis elementos multimedia",Channels:"Canales","Latest content":"Contenido más reciente",Search:"Buscar","Display {count} more items":"Mostrar {count} elementos más","Use default sorting":"Utilizar orden predeterminado","Creation date, descending":"Fecha de creación (descendente)","Creation date, ascending":"Fecha de creación (ascendente)","Add date, descending":"Añadir fecha (descendente)","Add date, ascending":"Añadir fecha (ascendente)","Title, descending":"Tí­tulo (descendente)","Title, ascending":"Título (ascendente)","Slug, descending":"Slug (descendente)","Slug, ascending":"Slug (ascendente)","Number of views, descending":"Número de visualizaciones (descendente)","Number of views, ascending":"Número de visualizaciones (ascendente)",Display:"Pantalla","Display mode:":"Modo de pantalla:",list:"lista","selected setting":"ajuste seleccionado",thumbnails:"miniaturas","Number of items:":"Número de elementos:","display items type icons":"mostrar iconos del tipo de elemento","Sort by:":"Ordenar por:",unspecified:"sin especificar",yes:"sí",no:"no","Filters:":"Filtros:","Editable:":"Editable:","Published:":"Publicado:","Speaker:":"Ponente:",Ok:"Aceptar","selected tab":"pestaña seleccionada","Sub channels":"Subcanales","Live streams":"Transmisiones en directo",Videos:"Vídeos","Photos groups":"Grupos de fotos",selected:"seleccionado","Open information panel":"Abrir panel de información",Edit:"Editar","Click to select this media":"Haz clic para seleccionar este elemento multimedia","This item is a channel":"Este elemento es un canal","This item is a photos group":"Este elemento es un grupo de fotos","This item is a live stream":"Este elemento es una transmisión en directo","This item is a video":"Este elemento es un vídeo","dynamic Rich Media":"Rich Media dinámico","classic Rich Media":"Rich Media clásico","This channel is unlisted":"Este canal está oculto","This media is not published":"Este elemento multimedia no está publicado","This media is published and unlisted":"Este elemento multimedia está publicado y oculto","This media is published":"Este elemento multimedia está publicado","This video is not ready":"Este vídeo no está listo","Created on":"Creado el","Type:":"Tipo:","Added on":"Añadido el","Parent channel:":"Canal matriz:","Matching annotations:":"Anotaciones coincidentes:","Matching photos:":"Fotos coincidentes:","This channel is selected":"Este canal está seleccionado","Select this channel":"Seleccionar este canal","This media is selected":"Este elemento multimedia está seleccionado","Select this media":"Seleccionar este elemento multimedia",Statistics:"Estadísticas",Delete:"Eliminar","Add a sub channel":"Añadir un subcanal","Add a video":"Añadir un vídeo","Copy LTI link":"Copiar enlace LTI",See:"Ver",copied:"copiado","cannot copy":"no se puede copiar","failed to copy":"no se ha podido copiar","Hide this window":"Ocultar esta ventana","Media information":"Información del elemento multimedia","Recording date":"Fecha de grabación","Publishing date":"Fecha de publicación",Duration:"Duración","Views last month":"Visualizaciones el mes pasado",Views:"Visualizaciones","Annotations last month":"Anotaciones el mes pasado",Annotations:"Anotaciones","Storage usage":"Uso del almacenamiento",Categories:"Categorías",Unspecified:"Sin especificar","See statistics on this channel":"Ver estadísticas de este canal","Content types":"Tipos de contenido","Content types to display:":"Tipos de contenido para mostrar:",channels:"canales",videos:"vídeos","live streams":"transmisiones en directo","This list presents all media and channels ordered by add date.":"Esta lista presenta todos los elementos multimedia y canales ordenados por fecha de adición.","Latest content added":"Último contenido añadido","Please login to access this page":"Inicia sesión para acceder a esta página","No contents.":"Sin contenido.",titles:"títulos",descriptions:"descripciones",keywords:"palabras clave",speakers:"ponentes",licenses:"licencias",companies:"empresas",locations:"anotaciones",categories:"categorías","comments, slides, ...":"comentarios, diapositivas, ...","external references":"referencias externas","external data":"datos externos","photos groups":"grupos de fotos","Search:":"Buscar:",Go:"Ir","Search in":"Buscar en",all:"todos",none:"ninguno","Search for":"Buscar","Use the input above to search for something.":"Utiliza la información anterior para buscar algo.","Search results for:":"Buscar resultados para:","Matching items:":"Elementos coincidentes:","No results.":"No hay resultados.",Loading:"Cargando","Unable to get channels tree because you are not logged in.":"No es posible obtener el árbol del canal porque no has iniciado sesión.","Channel does not exist.":"El canal no existe.","An error occurred in the server. Please try again later.":"Se ha producido un error en el servidor. Inténtalo de nuevo más tarde.","Unable to get channels tree. Request timed out.":"No se puede obtener el árbol del canal. Se ha agotado el tiempo de solicitud.","An error occurred during request:":"Ha ocurrido un error durante la solicitud:"},"es"),jsu.addTranslations({channel:"chaîne",video:"vidéo",live:"live",photos:"photos",January:"Janvier",February:"F&eacute;vrier",March:"Mars",April:"Avril",May:"Mai",June:"Juin",July:"Juillet",August:"Ao&ucirc;t",September:"Septembre",October:"Octobre",November:"Novembre",December:"D&eacute;cembre",at:"à",B:"o","You are not logged in or your session has expired. Please login and retry.":"Vous n'êtes pas connecté ou votre session a expiré. Veuillez vous reconnecter puis réessayez.","Access denied.":"Accès refusé.","Item not found.":"Élément introuvable.","An internal server error occurred. An email has been sent to the support team.":"Une erreur interne au serveur est survenue. Un email a été envoyé à l'équipe de support afin de résoudre le problème.","The connection timed out. Please retry later.":"Le délai d'attente de réponse a été dépassé. Veuillez réessayez plus tard.","The server cannot be reached.":"Le serveur est injoignable.","Unable to get search's results content because you cannot access to this channel.":"Impossible d'obtenir les résultats de la recherche car vous ne disposez pas du droit d'accès à cette chaîne.","Requested channel does not exist.":"La chaîne demandée n'existe pas.","Unable to get channel content because you cannot access to this channel.":"Impossible d'obtenir la liste du contenu de la chaîne car vous ne disposez pas du droit d'accès à cette chaîne.","Unable to get channel information because you cannot access to this channel.":"Impossible d'obtenir les informations sur la chaîne car vous ne pouvez pas accéder à cette chaîne.","Unable to get channels tree because you cannot access to this channel.":"Impossible d'obtenir la liste du contenu de la chaîne car vous ne disposez pas du droit d'accès à cette chaîne.","Unable to get channels path because you cannot access to this channel.":"Impossible d'obtenir le chemin de la chaîne car vous n'avez pas la permission d'accéder à cette chaîne.","Unable to get media information because you cannot access to this media.":"Impossible d'obtenir les informations sur le média car vous ne pouvez pas accéder à ce média.","Media does not exist.":"Le média n'existe pas.","You are not allowed to perform this action.":"Vous n'avez pas la permission d'effectuer cette action.","No information about error.":"Informations sur le média.","Request failed:":"Requête échouée :","Available space:":"Espace disponible :","No available space":"Pas d'espace disponible",help:"aide","The storage quota of the parent channels can have an impact on the available space of this channel.":"Le quota de stockage des chaînes en amont peut avoir un impact sur l'espace disponible dans cette chaîne.","Loading...":"Chargement ...","Select a channel to display its content.":"Sélectionnez une chaîne pour afficher son contenu.",Root:"Racine","My channel":"Ma chaîne","Main channels":"Chaînes principales","You are not allowed to have a personal channel.":"Vous n'avez pas la permission de disposer d'une chaîne personnelle.","Please login to access this channel":"Veuillez vous connecter pour accéder à cette chaîne","Sign in":"Connexion","Parent channel":"Chaîne parente",views:"vues","this month":"ce mois",annotations:"annotations","channel(s)":"chaîne(s)","video(s)":"vidéo(s)","live stream(s)":"diffusion(s) en direct","photos group(s)":"groupe(s) de photos","Channel content:":"Contenu de la chaîne :","Sub channels items are included in counts.":"Les éléments contenus dans les sous chaînes sont inclus dans les comptes.","Storage usage:":"Stockage utilisé :","Subscribe to channel videos RSS:":"S'abonner au flux RSS des vidéos de la chaîne :",standard:"standard",iTunes:"iTunes","iTunes (audio only)":"iTunes (audio uniquement)","Subscribe to channel videos RSS":"S'abonner au flux RSS des vidéos de la chaîne","This channel contains no media.":"Cette chaîne ne contient pas de média.","This channel contains no sub channels and no media.":"Cette chaîne ne contient pas de sous chaîne ni de média.","This channel contains no sub channels.":"Cette chaîne ne contient pas de sous chaîne.","Some contents may still exist in this channel but if it is the case your account is not allowed to see them.":"Du contenu peut tout de même être présent dans cette chaîne mais si c'est le cas, votre compte utilisateur ne possède pas la permission de le voir.","My media":"Mes médias","Search in my media":"Rechercher dans mes médias",Channels:"Chaînes","Latest content":"Contenu récent",Search:"Rechercher","Display {count} more items":"Afficher {count} éléments de plus","Use default sorting":"Utiliser le tri par défaut","Creation date, descending":"Date de création, décroissante","Creation date, ascending":"Date de création, croissante","Add date, descending":"Date d'ajout, décroissante","Add date, ascending":"Date d'ajout, croissante","Title, descending":"Titre, décroissant","Title, ascending":"Titre, croissant","Slug, descending":"Jeton, décroissant","Slug, ascending":"Jeton, croissant","Number of views, descending":"Nombre de vues, décroissant","Number of views, ascending":"Nombre de vues, croissant",Display:"Affichage","Display mode:":"Mode d'affichage :",list:"liste","selected setting":"option sélectionnée",thumbnails:"vignettes","Number of items:":"Nombre d'éléments :","display items type icons":"afficher les icônes de type des éléments","Sort by:":"Trier par :",unspecified:"non spécifié",yes:"oui",no:"non","Filters:":"Filtres :","Editable:":"Éditable :","Published:":"Publié:","Speaker:":"Intervenant :",Ok:"Ok","selected tab":"onglet sélectionné","Sub channels":"Sous chaînes","Live streams":"Diffusions en direct",Videos:"Vidéos","Photos groups":"Groupes de photos",selected:"sélectionné","Open information panel":"Ouvrir le panneau d'information",Edit:"Éditer","Click to select this media":"Cliquez pour sélectionner ce média","This item is a channel":"Cet élément est une chaîne","This item is a photos group":"Cet élément est un groupe de photos","This item is a live stream":"Cet élément est une diffusion en direct","This item is a video":"Cet élément est une vidéo","dynamic Rich Media":"Rich Media dynamique","classic Rich Media":"Rich Media classique","This channel is unlisted":"Cette chaîne est non listée","This media is not published":"Ce média n'est pas publié","This media is published and unlisted":"Ce média est publié et non listé","This media is published":"Ce média est publié","This video is not ready":"Cette vidéo n'est pas prête","Created on":"Créé le","Type:":"Type :","Added on":"Ajouté le","Parent channel:":"Chaîne parente :","Matching annotations:":"Annotations correspondantes :","Matching photos:":"Photos correspondantes :","This channel is selected":"Cette chaîne est sélectionnée","Select this channel":"Sélectionner cette chaîne","This media is selected":"Ce média est sélectionné","Select this media":"Sélectionner ce média",Statistics:"Statistiques",Delete:"Supprimer","Add a sub channel":"Ajouter une sous chaîne","Add a video":"Ajouter une vidéo","Copy LTI link":"Copier le lien LTI",See:"Voir",copied:"copié","cannot copy":"impossible de copier","failed to copy":"échec de la copie","Hide this window":"Fermer cette fenêtre","Media information":"Informations sur le média","Recording date":"Date d'enregistrement","Publishing date":"Date de publication",Duration:"Durée","Views last month":"Vues ce mois",Views:"Vues","Annotations last month":"Annotations ce mois",Annotations:"Annotations","Storage usage":"Stockage utilisé",Categories:"Catégories",Unspecified:"Non spécifié","See statistics on this channel":"Voir les statistiques de cette chaîne","Content types":"Types de contenu","Content types to display:":"Types de contenu à afficher :",channels:"chaînes",videos:"vidéos","live streams":"diffusions en direct","This list presents all media and channels ordered by add date.":"Cette liste présente les derniers éléments ajoutés triés par date d'ajout.","Latest content added":"Contenu récemment ajouté","Please login to access this page":"Veuillez vous connecter pour accéder à cette page","No contents.":"Pas de contenu.",titles:"titres",descriptions:"descriptions",keywords:"mots clés",speakers:"intervenants",licenses:"licences",companies:"sociétés",locations:"lieux",categories:"catégories","comments, slides, ...":"commentaires, diapositives, ...","external references":"références externes","external data":"données externes","photos groups":"groupes de photos","Search:":"Rechercher :",Go:"Envoyer","Search in":"Rechercher dans",all:"tout",none:"aucun","Search for":"Contenu à rechercher","Use the input above to search for something.":"Utilisez le champ de texte ci dessus pour rechercher du contenu.","Search results for:":"Résultats de recherche pour:","Matching items:":"Éléments correspondants :","No results.":"Pas de résultats.",Loading:"Chargement","Unable to get channels tree because you are not logged in.":"Impossible d'obtenir la liste des chaînes, vous n'êtes pas authentifié.","Channel does not exist.":"La chaîne n'existe pas.","An error occurred in the server. Please try again later.":"La requête a échoué. Veuillez réessayer plus tard.","Unable to get channels tree. Request timed out.":"Impossible d'obtenir la liste des chaînes. Délai d'attente de la requête écoulé.","An error occurred during request:":"Une erreur est survenue pendant la requête :"},"fr"),jsu.addTranslations({channel:"kanalen",video:"video",live:"live",photos:"foto's",January:"Januari",February:"Februari",March:"Maart",April:"April",May:"Mei",June:"Juni",July:"Juli",August:"Augustus",September:"September",October:"Oktober",November:"November",December:"December",at:"om",B:"B","You are not logged in or your session has expired. Please login and retry.":"Je bent niet ingelogd of je sessie is verlopen. Log in en probeer het opnieuw.","Access denied.":"Toegang geweigerd.","Item not found.":"Item niet gevonden.","An internal server error occurred. An email has been sent to the support team.":"Er is een interne serverfout opgetreden. Er is een e-mail naar het ondersteuningsteam gestuurd.","The connection timed out. Please retry later.":"De verbinding is verlopen. Probeer het later nog eens.","The server cannot be reached.":"De server is niet bereikbaar.","Unable to get search's results content because you cannot access to this channel.":"Kan de inhoud van zoekresultaten niet ophalen omdat je geen toegang hebt tot dit kanaal.","Requested channel does not exist.":"Het aangevraagde kanaal bestaat niet.","Unable to get channel content because you cannot access to this channel.":"Kan kanaalinhoud niet ophalen omdat je geen toegang hebt tot dit kanaal.","Unable to get channel information because you cannot access to this channel.":"Kan kanaalinformatie niet ophalen omdat je geen toegang hebt tot dit kanaal.","Unable to get channels tree because you cannot access to this channel.":"Kan kanalenstructuur niet ophalen omdat je geen toegang hebt tot dit kanaal.","Unable to get channels path because you cannot access to this channel.":"Kan kanalenpad niet ophalen omdat je geen toegang hebt tot dit kanaal.","Unable to get media information because you cannot access to this media.":"Kan media-informatie niet ophalen omdat je geen toegang hebt tot dit kanaal.","Media does not exist.":"Media bestaat niet.","You are not allowed to perform this action.":"Je mag deze bewerking niet uitvoeren.","No information about error.":"Geen foutinformatie.","Request failed:":"Aanvraag mislukt:","Available space:":"Beschikbare ruimte:","No available space":"Geen beschikbare ruimte",help:"help","The storage quota of the parent channels can have an impact on the available space of this channel.":"Het opslagquotum van de bovenliggende kanalen kan een invloed hebben op de beschikbare ruimte van dit kanaal.","Loading...":"Laden…","Select a channel to display its content.":"Selecteer een kanaal om de inhoud ervan te weergeven.",Root:"Root","My channel":"Mijn kanaal","Main channels":"Belangrijkste kanalen","You are not allowed to have a personal channel.":"Je mag geen persoonlijk kanaal hebben.","Please login to access this channel":"Log in om toegang te krijgen tot dit kanaal","Sign in":"Inloggen","Parent channel":"Bovenliggend kanaal",views:"weergaven","this month":"deze maand",annotations:"annotaties","channel(s)":"kanaal (kanalen)","video(s)":"video('s)","live stream(s)":"live stream(s)","photos group(s)":"fotogroep(en)","Channel content:":"Kanaalinhoud:","Sub channels items are included in counts.":"Items van subkanalen worden meegeteld.","Storage usage:":"Opslaggebruik:","Subscribe to channel videos RSS:":"Abonneren op kanaalvideo's RSS:",standard:"standaard",iTunes:"iTunes","iTunes (audio only)":"iTunes (alleen audio)","Subscribe to channel videos RSS":"Abonneren op kanaalvideo's RSS","This channel contains no media.":"Dit kanaal bevat geen media.","This channel contains no sub channels and no media.":"Dit kanaal bevat geen subkanalen en geen media.","This channel contains no sub channels.":"Dit kanaal bevat geen subkanalen.","Some contents may still exist in this channel but if it is the case your account is not allowed to see them.":"Sommige inhoud kan nog steeds aanwezig zijn op dit kanaal, maar als dit het geval is, mag jouw account deze niet bekijken.","My media":"Mijn media","Search in my media":"Zoek in mijn media",Channels:"Kanalen","Latest content":"Nieuwste inhoud",Search:"Zoeken","Display {count} more items":"Nog {count} items weergeven","Use default sorting":"Gebruik standaard sortering","Creation date, descending":"Aanmaakdatum, aflopend","Creation date, ascending":"Aanmaakdatum, oplopend","Add date, descending":"Toevoegdatum, aflopend","Add date, ascending":"Toevoegdatum, oplopend","Title, descending":"Titel, aflopend","Title, ascending":"Titel, oplopend","Slug, descending":"Slug, aflopend","Slug, ascending":"Slug, oplopend","Number of views, descending":"Aantal weergaven aflopend","Number of views, ascending":"Aantal weergaven, oplopend",Display:"Weergave","Display mode:":"Weergavemodus:",list:"lijst","selected setting":"geselecteerde instelling",thumbnails:"miniaturen","Number of items:":"Aantal items:","display items type icons":"items type pictogrammen weergeven","Sort by:":"Sorteren op:",unspecified:"niet gespecificeerd",yes:"ja",no:"nee","Filters:":"Filters:","Editable:":"Bewerkbaar:","Published:":"Gepubliceerd:","Speaker:":"Spreker:",Ok:"Ok","selected tab":"geselecteerd tabblad","Sub channels":"Subkanalen","Live streams":"Livestreams",Videos:"Video’s","Photos groups":"Fotogroepen",selected:"geselecteerd","Open information panel":"Open informatiepaneel",Edit:"Bewerken","Click to select this media":"Klik om deze media te selecteren","This item is a channel":"Dit item is een kanaal","This item is a photos group":"Dit item is een fotogroep","This item is a live stream":"Dit item is een livestream","This item is a video":"Dit item is een video","dynamic Rich Media":"dynamic Rich Media","classic Rich Media":"klassieke Rich Media","This channel is unlisted":"Dit kanaal is niet vermeld","This media is not published":"Deze media is niet gepubliceerd","This media is published and unlisted":"Deze media is gepubliceerd en niet vermeld","This media is published":"Deze media is gepubliceerd","This video is not ready":"Deze video is niet klaar","Created on":"Aangemaakt op","Type:":"Type:","Added on":"Toegevoegd op","Parent channel:":"Bovenliggend kanaal:","Matching annotations:":"Overeenkomende annotaties:","Matching photos:":"Bijpassende foto's:","This channel is selected":"Dit kanaal is geselecteerd","Select this channel":"Selecteer dit kanaal","This media is selected":"Deze media zijn geselecteerd","Select this media":"Selecteer deze media",Statistics:"Statistieken",Delete:"Verwijderen","Add a sub channel":"Een subkanaal toevoegen","Add a video":"Een video toevoegen","Copy LTI link":"Kopieer de LTI-link",See:"Bekijken",copied:"gecopieerd","cannot copy":"kan niet kopiëren","failed to copy":"kopiëren mislukt","Hide this window":"Verberg dit venster","Media information":"Media-informatie","Recording date":"Opnamedatum","Publishing date":"Publicatiedatum",Duration:"Duur","Views last month":"Weergaven afgelopen maand",Views:"Weergaven","Annotations last month":"Annotaties afgelopen maand",Annotations:"Annotaties","Storage usage":"Opslaggebruik",Categories:"Categorieën",Unspecified:"Niet gespecificeerd","See statistics on this channel":"Statistieken van dit kanaal bekijken","Content types":"Inhoudstypen","Content types to display:":"Inhoudstypen om te weergeven:",channels:"kanalen",videos:"video’s","live streams":"livestreams","This list presents all media and channels ordered by add date.":"Deze lijst toont alle media en kanalen gesorteerd op de toevoegingsdatum.","Latest content added":"Laatste inhoud toegevoegd","Please login to access this page":"Log in om toegang te krijgen tot deze pagina","No contents.":"Geen inhoud.",titles:"titels",descriptions:"beschrijvingen",keywords:"trefwoorden",speakers:"spreker",licenses:"licenties",companies:"bedrijven",locations:"lokaties",categories:"categorieën","comments, slides, ...":"opmerkingen, dia's, ...","external references":"externe referenties","external data":"externe gegevens","photos groups":"fotogroepen","Search:":"Zoeken:",Go:"Ga","Search in":"Zoeken in",all:"alle",none:"geen","Search for":"Zoeken naar","Use the input above to search for something.":"Gebruik bovenstaande invoer om iets te zoeken.","Search results for:":"Zoekresultaten voor:","Matching items:":"Items bij elkaar zoeken:","No results.":"Geen resultaten.",Loading:"Aan het laden","Unable to get channels tree because you are not logged in.":"Kan kanalenstructuur niet ophalen omdat je niet bent ingelogd.","Channel does not exist.":"Het kanaal bestaat niet.","An error occurred in the server. Please try again later.":"Er is een fout opgetreden op de server. Probeer het later opnieuw.","Unable to get channels tree. Request timed out.":"Kan kanalenstructuur niet ophalen. Verzoek is verlopen.","An error occurred during request:":"Er is een fout opgetreden tijdens het verzoek:"},"nl"),MSAPIClient.prototype.configure=function(e){e&&(e.baseUrl&&(this.baseUrl=e.baseUrl),e.useProxy&&(this.useProxy=e.useProxy),e.extraData&&(this.extraData=e.extraData))},MSAPIClient.prototype.ajaxCall=function(e,t,s,n,a,i){let o=this.calls[e];if(!o){const t=e.split(":");if(1==t.length)o={method:"GET",url:t[0]};else{if(2!=t.length)throw new Error("Invalid call or uri.");o={method:t[0],url:t[1]}}}let r=this.baseUrl;if(this.useProxy?t.action=o.url:(this.baseUrl||(t.local="yes"),r+=o.url),void 0===r||"undefined"===r)throw new Error("No url to call.");if(this.extraData){let e;for(e in this.extraData)t[e]=this.extraData[e]}const l=this,c={url:r,method:o.method,data:t,dataType:"json",cache:!1,success:function(e){if(e.success||e.error||(e.error=e.message?e.message:jsu.translate("No information about error.")),s)return s(e)},error:function(e,t,n){let a="?";e.status?a=e.status:"error"==t?a="unreachable":"timeout"==t&&(a="timeout");let i=o.errors&&a in o.errors?o.errors[a]:"";return i||(i=a in l.defaultsErrorsMessages?l.defaultsErrorsMessages[a]:jsu.translate("Request failed:")+" "+n),s({success:!1,error:i,errorCode:e.status,xhr:e,textStatus:t,thrownError:n})}};return(void 0===n||n)&&(c.async=n),a&&(c.processData=!1,c.enctype="multipart/form-data",c.contentType=!1),i&&(c.xhr=i),$.ajax(c)},MSAPIClient.prototype.getStorageDisplay=function(e){let t="";if(null!==e.storage_used&&void 0!==e.storage_used){if(t='<span class="storage-usage">'+jsu.getSizeDisplay(e.storage_used),e.storage_quota>0){t+=" / "+jsu.escapeHTML(e.storage_quota)+" G"+jsu.translateHTML("B");let s=Math.round(e.storage_used/1e9*100/e.storage_quota);s>100&&(s=100);let n="";e.storage_warning&&s>e.storage_warning&&(n=" red"),t+='<span class="progress-bar inline-block'+n+'" aria-hidden="true" style="width: 100%; vertical-align: middle;"><span class="progress-level" style="width: '+s+'%"></span><span class="progress-label">'+s+" %</span></span>"}t+="</span>";const s=this.getAvailableStorageDisplay(e);s&&(t+=" "+s)}return t},MSAPIClient.prototype.getStorageMinimalDisplay=function(e){let t="";return null!==e.storage_used&&void 0!==e.storage_used&&(t='<span class="storage-usage">'+jsu.getSizeDisplay(e.storage_used),e.storage_quota>0&&(t+=" / "+jsu.escapeHTML(e.storage_quota)+" G"+jsu.translateHTML("B")),t+="</span>"),t},MSAPIClient.prototype.getAvailableStorageDisplay=function(e){let t="";if(null!==e.storage_available&&void 0!==e.storage_available){let s="";if(e.storage_quota>0){const t=e.storage_used/1e9*100/e.storage_quota;e.storage_warning&&t>e.storage_warning&&(s=" orange")}t+='<span class="storage-available nowrap">',e.storage_available>0?t+='<span class="'+s+' ">'+jsu.translateHTML("Available space:")+" "+jsu.getSizeDisplay(e.storage_available)+"</span>":t+='<span class="red">'+jsu.translateHTML("No available space")+"</span>",t+=' <button type="button" class="tooltip-button no-padding no-border no-background" aria-describedby="id_storage_help" aria-label="'+jsu.translateAttribute("help")+'"><i class="fa fa-question-circle fa-fw" aria-hidden="true"></i><span role="tooltip" id="id_storage_help" class="tooltip-hidden-content">'+jsu.translateHTML("The storage quota of the parent channels can have an impact on the available space of this channel.")+"</span></button>",t+="</span>"}return t},MSBrowserChannels.prototype.getMenuJq=function(){return this.$menu=$('<div id="ms_browser_channels_menu" style="display: none;"></div>'),this.$menu},MSBrowserChannels.prototype.getContentJq=function(){let e='<div id="ms_browser_channels" class="ms-browser-content" style="display: none;">';return this.browser.treeManager&&(e+='<div class="ms-browser-tree-place ms-channels-tree"><div><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> '+jsu.translateHTML("Loading...")+"</div></div>"),e+='<div class="ms-browser-channels-body"><div class="ms-browser-channels-place"><div class="messages"><div class="message info">'+jsu.translateHTML("Select a channel to display its content.")+"</div></div></div>"+this.browser.getMoreButton()+"</div></div>",this.$content=$(e),this.$place=$(".ms-browser-channels-place",this.$content),this.$content},MSBrowserChannels.prototype.refreshTitle=function(){if("channels"!=this.browser.getActiveTab())return;const e=this.lastResponse?this.lastResponse.info:void 0;if(e&&"0"!=e.oid){let t='<span class="item-entry-preview"><img src="'+jsu.escapeAttribute(e.thumb)+'" alt="'+jsu.escapeHTML(e.title)+'"/></span>';t+='<span class="channel-titles-place">';const s=e.parent_oid&&"0"!=e.parent_oid?e.parent_title:jsu.translate("Root");this.browser.useOverlay||!s||this.browser.hideHeader&&this.browser.initialState&&this.browser.initialState.channelSlug&&this.browser.initialState.channelSlug==e.slug||(t+='<a class="parent-channel-title" href="#'+jsu.escapeAttribute(e.parent_slug?e.parent_slug:"")+'"'+(e.parent_language?'lang="'+jsu.escapeAttribute(e.parent_language)+'"':"")+">"+jsu.escapeHTML(s)+"</a><wbr/>"),t+='<span class="channel-title"'+(e.language?'lang="'+jsu.escapeAttribute(e.language)+'"':"")+">"+jsu.escapeHTML(e.title)+"</span>",t+="</span>",this.browser.currentSelection&&this.browser.currentSelection.oid==e.oid&&(t='<span class="selected">'+t+"</span>"),this.browser.setTitle(e.title,t)}else this.browser.ltiMode?this.browser.setTitle(jsu.translateHTML("My channel")):this.browser.setTitle(jsu.translateHTML("Main channels"))},MSBrowserChannels.prototype.onShow=function(){if(this.refreshTitle(),this.initialized)return;this.initialized=!0,this.defaultLogoSrc=$("#mainlogo .header-logo").attr("src"),this.defaultFavSrc=$("#favicon_link").attr("src");const e=this;if(this.browser.treeManager){const t={$place:$(".ms-browser-tree-place",this.$content),msapi:this.browser.msapi,displayRoot:-1!=this.browser.displayableContent.indexOf("c"),displayPersonal:!0,currentChannelOid:this.currentChannelOid,onDataRetrieved:function(t){e.browser.updateCatalog(t)}};this.browser.pickMode&&(t.onChange=function(t){e.displayChannel(t)}),this.treeManager=new MSTreeManager(t)}this.initOptions.initialState&&this.initOptions.initialState.channelSlug?this.displayChannelBySlug(this.initOptions.initialState.channelSlug):"self"==this.browser.filterSpeaker?this.displayPersonalChannel():this.displayChannel(this.currentChannelOid)},MSBrowserChannels.prototype.setOrder=function(e){this.order=e||"default",this.refreshDisplay(!0)},MSBrowserChannels.prototype.displayPersonalChannel=function(){const e=this;this.personalChannelOid?e.displayChannel(this.personalChannelOid):this.browser.msapi.ajaxCall("getChannelsPersonal",{},function(t){t.success?(e.personalChannelOid=t.oid,e.displayChannel(t.oid)):403==t.errorCode?e._onChannelError({error:jsu.translate("You are not allowed to have a personal channel.")}):e._onChannelError(t)})},MSBrowserChannels.prototype.displayChannelBySlug=function(e){const t=this;this.browser.getInfoForSlug(e,!1,!0,function(e){e.success?t.displayChannel(e.info.oid):t._onChannelError(e)})},MSBrowserChannels.prototype.displayChannel=function(e){if(this.currentChannelOid=e,this.browser.boxHideInfo(),this.initialized)if(this.browser.displayLoading(),this.treeManager&&this.treeManager.setActive(e),"0"!=e){const t=this;this.browser.getInfoForOid(e,!0,function(s){t._onChannelInfo(s,e)})}else this._onChannelInfo(null,e)},MSBrowserChannels.prototype.displayParent=function(){if(!this.currentChannelOid)return;const e=this.currentChannelOid,t=this.browser.catalog[e]&&this.browser.catalog[e].parent_oid?this.browser.catalog[e].parent_oid:"0";this.displayChannel(t)},MSBrowserChannels.prototype._onChannelError=function(e){this.lastResponse=null;let t='<div class="messages">';if(this.browser.useOverlay||"403"!=e.errorCode&&"401"!=e.errorCode)t+='<div class="message error">'+jsu.escapeHTML(e.error)+"</div>";else{const s=this.browser.urlLogin+"?next="+window.location.pathname+(window.location.hash?window.location.hash.substring(1):"");t+='<div class="item-description"><div class="message error">'+jsu.escapeHTML(e.error)+"</div><p>"+jsu.translateHTML("Please login to access this channel")+'<br /> <a href="'+s+'">'+jsu.translateHTML("Sign in")+"</a></p></div>"}t+="</div>",this.$place.html(t),this.browser.hideMoreBtns("channels")},MSBrowserChannels.prototype._onChannelInfo=function(e,t){if(this.currentChannelOid!=t)return void this.browser.hideLoading();if(e&&!e.success)return this._onChannelError(e);const s={};t&&"0"!=t&&(s.parent_oid=t),this.browser.parentSelectionOid&&(s.parent_selection_oid=this.browser.parentSelectionOid),this.browser.displayableContent&&(s.content=this.browser.displayableContent),null!==this.browser.filterEditable&&(s.editable=this.browser.filterEditable?"yes":"no"),null!==this.browser.filterValidated&&(s.validated=this.browser.filterValidated?"yes":"no"),this.browser.ltiMode||null===this.browser.filterSpeaker||(s.speaker=this.browser.filterSpeaker),this.browser.filterNoCategories?s.no_categories=!0:this.browser.filterCategories.length>0&&(s.categories=this.browser.filterCategories.join("\n")),s.order_by=this.order;const n=this;this.browser.msapi.ajaxCall("getChannelsContent",s,function(s){e&&(e.info&&(s.info=e.info),e.parent_selectable&&(s.parent_selectable=e.parent_selectable),e.selectable&&(s.selectable=e.selectable)),n._onChannelContent(s,t)})},MSBrowserChannels.prototype._onChannelContent=function(e,t){if(this.browser.hideLoading(),this.browser.moreChannels=[],this.browser.moreLiveStreams=[],this.browser.moreVideos=[],this.browser.morePhotosGroups=[],this.browser.hideMoreBtns("channels"),this.currentChannelOid!=t)return;if(!e.success)return this._onChannelError(e);let s;if(this.lastResponse=e,!this.browser.useOverlay&&this.browser.displayAsThumbnails&&this.browser.boxHideInfo(),this.$menu.html(""),"0"!=t){if(!this.browser.ltiMode||t!=this.personalChannelOid){const t={oid:e.info.parent_oid?e.info.parent_oid:"0",title:e.info.parent_title?e.info.parent_title:jsu.translate("Parent channel"),slug:e.info.parent_slug};let s;if(e.info.parent_oid&&e.info.parent_slug&&this.browser.updateCatalog(t),this.browser.useOverlay?(s=$('<button type="button" class="button '+this.browser.btnClass+' back-button"></button>')).click({obj:this,oid:t.oid},function(e){e.data.obj.displayChannel(e.data.oid)}):s=$('<a class="button '+this.browser.btnClass+' back-button" href="'+this.browser.getButtonLink(t,"view")+'"></a>'),!this.browser.useOverlay&&$(".navbar .back.button-text").length>0?(s.html('<i class="fa fa-chevron-circle-up fa-fw fa-2x" aria-hidden="true"></i>'),s.attr("title",jsu.translate("Parent channel")),s.attr("aria-label",jsu.translate("Parent channel")),s.addClass("back").addClass("button-text"),$(".navbar .back.button-text").replaceWith(s)):(s.html('<i class="fa fa-chevron-circle-up" aria-hidden="true"></i> <span class="hidden-below-800">'+jsu.translateHTML("Parent channel")+"</span>"),this.$menu.append(s)),this.browser.pickMode){const t=this.browser.msapi.getAvailableStorageDisplay(e.info);t&&(this.$menu.append(t+" "),window.uwlb||$(".tooltip-button",this.$menu).click(function(){$("span",this).toggle()}))}}const n=-1!=this.browser.selectableContent.indexOf("c")&&(!this.browser.parentSelectionOid||e.selectable);s=this.browser.getEntryLinks(e.info,"current",n)}else e.oid="0",s=this.browser.getEntryLinks(e,"current",!1),!this.browser.useOverlay&&$(".navbar .back.button-text").length>0&&$(".navbar .back.button-text").attr("href","..");if(s&&this.$menu.append(s),this.$place.html(""),this.browser.useOverlay)this.$place.scrollTop(0);else{if("0"!=t){const t=$('<div class="item-description"></div>');let s=!0,n=e.info.can_edit?this.browser.msapi.getStorageDisplay(e.info):"";if(e.info.views||e.info.comments){let a='<div class="'+(e.info.short_description||e.info.display_rss_links||n?"right":"align-right")+' channel-description-stats">';this.browser.couldDisplay("views")&&e.info.views&&(a+='<span class="inline-block">'+e.info.views+" "+jsu.translate("views"),e.info.views_last_month&&(a+=", "+e.info.views_last_month+" "+jsu.translate("this month")),a+="</span>"),this.browser.couldDisplay("annotations")&&e.info.comments&&(a+=' <span class="inline-block">'+e.info.comments+" "+jsu.translate("annotations"),e.info.comments_last_month&&(a+=", "+e.info.comments_last_month+" "+jsu.translate("this month")),a+="</span>"),a+="</div>",t.append(a),s=!1}if(this.browser.couldDisplay("description")&&e.info.short_description){const n=$('<div class="channel-description-text">'+e.info.short_description+"</div>");e.info.short_description!=e.info.description&&(n.addClass("short-desc"),n.click({description:e.info.description},function(e){$(this).html(e.data.description).unbind("click").removeClass("short-desc")})),t.append(n),s=!1}if(this.browser.couldDisplay("channel_content")&&e.info.items_count){const n=[];e.info.channels_count&&n.push(e.info.channels_count+" "+jsu.translate("channel(s)")),e.info.videos_count&&n.push(e.info.videos_count+" "+jsu.translate("video(s)")),e.info.lives_count&&n.push(e.info.lives_count+" "+jsu.translate("live stream(s)")),e.info.pgroups_count&&n.push(e.info.pgroups_count+" "+jsu.translate("photos group(s)"));let a='<div class="channel-items-count">'+jsu.translate("Channel content:");a+=" <span>"+jsu.escapeHTML(n.join(", "))+"</span>",a+=' <button type="button" class="tooltip-button no-padding no-border no-background" aria-describedby="id_count_help" aria-label="'+jsu.translateAttribute("help")+'"><i class="fa fa-question-circle fa-fw" aria-hidden="true"></i><span role="tooltip" id="id_count_help" class="tooltip-hidden-content">'+jsu.translateHTML("Sub channels items are included in counts.")+"</span></button>",a+="</div>",t.append(a),window.uwlb||$(".channel-items-count .tooltip-button",t).click(function(){$("span",this).toggle()}),s=!1}if(this.browser.couldDisplay("storage")&&n&&(n='<div class="channel-storage-usage">'+jsu.translate("Storage usage:")+" "+n+"</div>",t.append(n),window.uwlb||$(".channel-storage-usage .tooltip-button",t).click(function(){$("span",this).toggle()}),s=!1),this.browser.couldDisplay("rss_links")&&e.info.display_rss_links){let n='<div class="channel-description-rss"> ';this.displayItunesRss?(n+=' <span class="inline-block">'+jsu.translate("Subscribe to channel videos RSS:")+"</span>",n+=' <a class="nowrap" href="/channels/'+e.info.oid+'/rss.xml">',n+='<i class="fa fa-rss" aria-hidden="true"></i> '+jsu.translate("standard")+"</a>",n+=' <a class="nowrap" href="/channels/'+e.info.oid+'/itunes-video.xml">',n+='<i class="fa fa-apple" aria-hidden="true"></i> '+jsu.translate("iTunes")+"</a>",n+=' <a class="nowrap" href="/channels/'+e.info.oid+'/itunes-audio.xml">',n+='<i class="fa fa-apple" aria-hidden="true"></i> '+jsu.translate("iTunes (audio only)")+"</a>"):(n+=' <a class="nowrap" href="/channels/'+e.info.oid+'/rss.xml">',n+='<i class="fa fa-rss" aria-hidden="true"></i> '+jsu.translate("Subscribe to channel videos RSS")+"</a>"),n+="</div>",t.append(n),s=!1}s||this.$place.append(t)}if($("head .csslistlink").remove(),e.info){let t,s="";for(t in e.info.css_list)s+='<link class="csslistlink" rel="stylesheet" type="text/css" href="'+e.info.css_list[t]+'"/>';$("head").append(s)}e.info&&e.info.logo_url?$("#mainlogo .header-logo").attr("src",e.info.logo_url):$("#mainlogo .header-logo").attr("src",this.defaultLogoSrc),e.info&&e.info.favicon_url?$("#faviconLink").attr("href",e.info.favicon_url):$("#faviconLink").attr("href",this.defaultFavSrc)}const n=e.channels?e.channels.length:0,a=e.videos?e.videos.length:0,i=e.live_streams?e.live_streams.length:0,o=e.photos_groups?e.photos_groups.length:0,r=n>0||a>0||i>0||o>0;if(this.refreshTitle(),r)this.browser.displayContent(this.$place,e,t,"channels");else{let e;e=-1==this.browser.selectableContent.indexOf("c")?jsu.translate("This channel contains no media."):this.browser.displayableContent.length>1?jsu.translate("This channel contains no sub channels and no media."):jsu.translate("This channel contains no sub channels."),e+="<br/>"+jsu.translate("Some contents may still exist in this channel but if it is the case your account is not allowed to see them."),this.$place.append('<div class="messages"><div class="message info">'+e+"</div></div>")}},MSBrowserChannels.prototype.refreshDisplay=function(e){e&&this.lastResponse&&(this.lastResponse=null),this.lastResponse?this._onChannelContent(this.lastResponse,this.currentChannelOid):this.browser.ltiMode?this.displayPersonalChannel():this.displayChannel(this.currentChannelOid)},MSBrowserChannels.prototype.remove=function(e){if(this.currentChannelOid==e){const t=this.browser.catalog[e]&&this.browser.catalog[e].parent_oid?this.browser.catalog[e].parent_oid:"0";!this.browser.pickMode&&this.browser.catalog[t]&&this.browser.catalog[t].slug?window.location.hash="#"+this.browser.catalog[t].slug:this.displayChannel(t)}else this.browser.removeOidFromTab(this,e)},MSBrowser.prototype.buildWidget=function(){let e,t,s;this.lastOverlayFocus=document.activeElement,this.previousFocus=null,"self"==this.filterSpeaker?(e=jsu.translate("My channel"),s=jsu.translate("My media"),t=jsu.translate("Search in my media")):(e=jsu.translate("Channels"),s=jsu.translate("Latest content"),t=jsu.translate("Search"));let n,a,i='<div class="ms-browser ms-browser-container'+(this.useOverlay?" in-overlay":"")+(this.treeManager?" has-tree":"")+(this.displayTypesIcons?" show-types-icons":"")+(this.hideHeader?" no-header":"")+'"><div class="ms-browser-header"><div class="ms-browser-menu">';this.useOverlay?i+='<button type="button" id="ms_browser_channels_tab" class="ms-browser-tab button '+this.btnClass+'" title="'+jsu.escapeAttribute(e)+'" aria-label="'+jsu.escapeAttribute(e)+'"><i class="fa fa-folder-open" aria-hidden="true"></i> <span class="hidden-below-800" aria-hidden="true">'+jsu.escapeHTML(e)+'</span></button><button type="button" id="ms_browser_latest_tab" class="ms-browser-tab button '+this.btnClass+'" title="'+jsu.escapeAttribute(s)+'" aria-label="'+jsu.escapeAttribute(s)+'"><i class="fa fa-clock-o" aria-hidden="true"></i> <span class="hidden-below-800" aria-hidden="true">'+jsu.escapeHTML(s)+'</span></button><button type="button" id="ms_browser_search_tab" class="ms-browser-tab button '+this.btnClass+'" title="'+jsu.escapeAttribute(t)+'" aria-label="'+jsu.escapeAttribute(t)+'"><i class="fa fa-search" aria-hidden="true"></i> <span class="hidden-below-800" aria-hidden="true">'+jsu.escapeHTML(t)+"</span></button>":i+='<a id="ms_browser_channels_tab" class="ms-browser-tab button '+this.btnClass+'" href="'+this.urlChannels+'" title="'+jsu.escapeAttribute(e)+'" aria-label="'+jsu.escapeAttribute(e)+'"><i class="fa fa-folder-open" aria-hidden="true"></i> <span class="hidden-below-800" aria-hidden="true">'+jsu.escapeHTML(e)+'</span></a><a id="ms_browser_latest_tab" class="ms-browser-tab button '+this.btnClass+'" href="'+this.urlLatest+'" title="'+jsu.escapeAttribute(s)+'" aria-label="'+jsu.escapeAttribute(s)+'"><i class="fa fa-clock-o" aria-hidden="true"></i> <span class="hidden-below-800" aria-hidden="true">'+jsu.escapeHTML(s)+'</span></a><a id="ms_browser_search_tab" class="ms-browser-tab button '+this.btnClass+'" href="'+this.urlSearch+'" title="'+jsu.escapeAttribute(t)+'" aria-label="'+jsu.escapeAttribute(t)+'"><i class="fa fa-search" aria-hidden="true"></i> <span class="hidden-below-800" aria-hidden="true">'+jsu.escapeHTML(t)+"</span></a>",i+='</div><h2 class="ms-browser-title"></h2></div><div class="ms-browser-bar"></div><div class="ms-browser-main ms-items"><div class="ms-browser-clear"></div><div class="ms-browser-loading"><div><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> '+jsu.translateHTML("Loading...")+'</div></div><div class="ms-browser-message"><div></div></div></div></div>',this.$widget=$(i),!this.useOverlay&&$("nav .buttons-left").length>0?((a=$("nav .buttons-left")).addClass("ms-browser"),this.hideHeader&&a.addClass("no-header"),a.append(this.getTopMenuJq()),(n=$("#commands_place")).addClass("ms-browser"),this.hideHeader&&n.addClass("no-header"),n.addClass("ms-browser-dropdown-right")):((a=$(".ms-browser-header",this.$widget)).addClass("ms-browser-dropdown-right"),a.prepend(this.getTopMenuJq()),(n=$(".ms-browser-bar",this.$widget)).addClass("ms-browser-dropdown-right")),n.append(this.latest.getMenuJq()),n.append(this.channels.getMenuJq()),n.append(this.search.getMenuJq()),this.$main=$(".ms-browser-main",this.$widget),this.$main.append(this.latest.getContentJq()),this.$main.append(this.channels.getContentJq()),this.$main.append(this.search.getContentJq()),this.$main.append('<div class="ms-browser-clear"></div>'),this.$menu=$(".ms-browser-menu",this.$widget),this.place&&$(this.place).html(this.$widget),$("#ms_browser_channels_tab",this.$menu).click({obj:this},function(e){return e.data.obj.changeTab("channels"),!1}),$("#ms_browser_latest_tab",this.$menu).click({obj:this},function(e){return e.data.obj.changeTab("latest"),!1}),$("#ms_browser_search_tab",this.$menu).click({obj:this},function(e){return e.data.obj.changeTab("search"),!1}),$(".ms-browser-more-btn button",this.$widget).click({obj:this},function(e){e.data.obj.displayMore(this.displayCount)})},MSBrowser.prototype.getTopMenuJq=function(){const e=[{default:jsu.translate("Use default sorting")},{"creation_date-desc":jsu.translate("Creation date, descending")},{"creation_date-asc":jsu.translate("Creation date, ascending")},{"add_date-desc":jsu.translate("Add date, descending")},{"add_date-asc":jsu.translate("Add date, ascending")},{"title-desc":jsu.translate("Title, descending")},{"title-asc":jsu.translate("Title, ascending")},{"slug-desc":jsu.translate("Slug, descending")},{"slug-asc":jsu.translate("Slug, ascending")},{"views-desc":jsu.translate("Number of views, descending")},{"views-asc":jsu.translate("Number of views, ascending")}];let t,s='<div class="ms-browser-top-buttons"><div class="ms-browser-dropdown" id="ms_browser_display_dropdown"><button aria-controls="ms_browser_display_dropdow_menu" aria-expanded="false" type="button" title="'+jsu.translateAttribute("Display")+'" class="button ms-browser-dropdown-button '+this.btnClass+'"><i class="fa fa-tv" aria-hidden="true"></i> <span class="hidden-below-1280">'+jsu.translateHTML("Display")+' </span><i class="fa fa-angle-down" aria-hidden="true"></i></button><div class="ms-browser-dropdown-menu" id="ms_browser_display_dropdow_menu"><div><h4>'+jsu.translateHTML("Display mode:")+'</h4><button type="button" class="button '+(this.displayAsThumbnails?"":"active")+'" id="ms_browser_display_as_list" title="'+jsu.translateAttribute("list")+(this.displayAsThumbnails?"":" ("+jsu.translateAttribute("selected setting")+")")+'">'+jsu.translateHTML("list")+'</button><button type="button" class="button '+(this.displayAsThumbnails?"active":"")+'" id="ms_browser_display_as_thumbnails" title="'+jsu.translateAttribute("thumbnails")+(this.displayAsThumbnails?" ("+jsu.translateAttribute("selected setting")+")":"")+'">'+jsu.translateHTML("thumbnails")+'</button><br/><label for="ms_browser_number_item">'+jsu.translateHTML("Number of items:")+'</label><select id="ms_browser_number_item">';for(const e of[10,30,100])s+='<option value="'+e+'"'+(e==this.displayCount?' selected="selected"':"")+">"+e+"</option>";for(t in s+='</select><br/><input id="ms_browser_display_types_icons" type="checkbox" '+(this.displayTypesIcons?'checked="checked"':"")+'> <label for="ms_browser_display_types_icons">'+jsu.translateHTML("display items type icons")+'</label></div><div class="ms-browser-channel-order"><h4><label for="ms_browser_order_channel">'+jsu.translate("Sort by:")+'</label></h4> <select id="ms_browser_order_channel">',e)for(const n in e[t])s+='<option value="'+n+'">'+jsu.escapeHTML(e[t][n])+"</option>";s+="</select></div>";const n='<option value="">'+jsu.translateHTML("unspecified")+'</option><option value="yes">'+jsu.translateHTML("yes")+'</option><option value="no">'+jsu.translateHTML("no")+"</option>";s+='<div class="ms-browser-filters"><h4>'+jsu.translateHTML("Filters:")+'</h4> <form id="ms_browser_filters_form"> <label for="ms_browser_filter_editable">'+jsu.translateHTML("Editable:")+'</label> <select id="ms_browser_filter_editable">'+n+"</select>",(this.displayableContent.length>1||"c"!=this.displayableContent)&&(s+=' <br/> <label for="ms_browser_filter_validated">'+jsu.translateHTML("Published:")+'</label> <select id="ms_browser_filter_validated">'+n+"</select>","self"!=this.filterSpeaker&&(s+=' <br/> <label for="ms_browser_filter_speaker">'+jsu.translateHTML("Speaker:")+'</label> <input type="text" id="ms_browser_filter_speaker" value="'+(this.filterSpeaker?this.filterSpeaker:"")+'"/> <button type="submit" class="button">'+jsu.translateHTML("Ok")+"</button>")),s+=" </form></div></div></div>",s+="</div>",this.$topMenu=$(s);const a=$("#ms_browser_display_dropdown",this.$topMenu);this.setupDropdown(a),$("#ms_browser_display_as_list",a).click({obj:this,$dropdown:a},function(e){e.data.obj.setDisplayAsList()}),$("#ms_browser_display_as_thumbnails",a).click({obj:this,$dropdown:a},function(e){e.data.obj.setDisplayAsThumbnails()}),$("#ms_browser_display_types_icons",a).change({obj:this,$dropdown:a},function(e){e.data.obj.setDisplayTypesIcons(this.checked)}),$("#ms_browser_order_channel",a).change({obj:this,$dropdown:a},function(e){e.data.obj.channels.setOrder($(this).val()),e.data.obj.search.setOrder($(this).val())}),$("#ms_browser_filters_form select",a).change({obj:this,$dropdown:a},function(e){$("#ms_browser_filters_form",e.data.$dropdown).submit()}),$("#ms_browser_filters_form",a).submit({obj:this,$dropdown:a},function(e){return e.data.obj.onFiltersSubmit($(this)),!1}),$("#ms_browser_number_item",a).change({obj:this},function(e){const t=parseInt(this.value,10);t>e.data.obj.displayCount&&e.data.obj.displayMore(t-e.data.obj.displayCount),e.data.obj.displayCount=t,$(".ms-browser-more-btn button").text(e.data.obj.moreLabel.replace(/\{count\}/,e.data.obj.displayCount)),jsu.setCookie("catalog-displayCount",t)});try{this.focusWasInDropdown=!1,window.addEventListener("blur",function(){this.checkFocusDropdown()}.bind(this),!0),window.addEventListener("focus",function(){this.checkFocusDropdown()}.bind(this),!0)}catch(e){console.error("Failed to listen to focus changes: "+e)}return this.$topMenu},MSBrowser.prototype.getMoreButton=function(){return this.moreLabel||(this.moreLabel=jsu.translate("Display {count} more items")),'<div class="ms-browser-more-btn"><button type="button" class="button">'+this.moreLabel.replace(/\{count\}/,this.displayCount)+"</button></div>"},MSBrowser.prototype.setTitle=function(e,t){if(t||(t=e),!this.useOverlay&&$("#global .main-title h1").length>0?($("#global .main-title h1").html(t),$("#global .main-title h1").attr("tabindex","-1"),$("#global .main-title h1").focus()):$(".ms-browser-title",this.$widget).html(t),!this.useOverlay&&document.title){if(!this.documentTilteSuffix){const e=document.title.indexOf(" - ");this.documentTilteSuffix=-1!=e?document.title.substring(e):" - Nudgis"}document.title=e+this.documentTilteSuffix}},MSBrowser.prototype.setupDropdown=function(e){$(".ms-browser-dropdown-button",e).click({$dropdown:e},function(e){const t=$(".ms-browser-dropdown-button",e.data.$dropdown),s=$(".ms-browser-dropdown-menu",e.data.$dropdown);s.attr("tabindex","-1"),t.hasClass("active")?(t.removeClass("active"),t.attr("aria-expanded",!1),s.removeClass("active")):(t.addClass("active"),t.attr("aria-expanded",!0),s.addClass("active"))}),$(document).click({$dropdown:e},function(e){const t=$(".ms-browser-dropdown-button",e.data.$dropdown),s=$(".ms-browser-dropdown-menu",e.data.$dropdown);!t.hasClass("active")||s.is(e.target)||0!==s.has(e.target).length||t.is(e.target)||0!==t.has(e.target).length||(t.removeClass("active"),t.attr("aria-expanded",!1),s.removeClass("active"))})},MSBrowser.prototype.closeDropdown=function(e){const t=$(".ms-browser-dropdown-button",e),s=$(".ms-browser-dropdown-menu",e);t.hasClass("active")&&(t.removeClass("active"),t.attr("aria-expanded",!1),s.removeClass("active"))},MSBrowser.prototype.checkFocusDropdown=function(){if(!document.activeElement||document.activeElement==document.body)return;let e=!1,t=document.activeElement;for(;t;){if(t.className&&-1!=t.className.indexOf("ms-browser-dropdown-menu")){e=!0,this.focusWasInDropdown=!0;break}t=t.parentNode}!e&&this.focusWasInDropdown&&(this.focusWasInDropdown=!1,$(".ms-browser-dropdown-button.active").removeClass("active").attr("aria-expanded",!1),$(".ms-browser-dropdown-menu.active").removeClass("active"))},MSBrowser.prototype.onFiltersSubmit=function(e){const t=[{type:"choice",id:"ms_browser_filter_editable",name:"filterEditable"},{type:"choice",id:"ms_browser_filter_validated",name:"filterValidated"}];"self"!=this.filterSpeaker&&t.push({type:"text",id:"ms_browser_filter_speaker",name:"filterSpeaker"});let s=!1;for(let n=0;n<t.length;n++){const a=$("#"+t[n].id,e);if(a.length>0){let e=a.val();if("choice"==t[n].type)switch(e){case"yes":e=!0;break;case"no":e=!1;break;default:e=null}else e||(e=null);this[t[n].name]!==e&&(this[t[n].name]=e,s=!0)}}s&&(this.channels.refreshDisplay(!0),this.latest.refreshDisplay(!0),this.search.refreshDisplay(!0))},MSBrowser.prototype.setDisplayAsList=function(){const e=$("#ms_browser_display_as_thumbnails",this.$topMenu),t=$("#ms_browser_display_as_list",this.$topMenu);t.hasClass("active")||(this.displayAsThumbnails=!1,e.removeClass("active").attr("title",e.text()),t.addClass("active").attr("title",t.text()+" ("+jsu.translate("selected setting")+")"),this.useOverlay||$("#global").addClass("max-width-1200"),jsu.setCookie("catalog-displayMode","list"),this.channels.refreshDisplay(),this.latest.refreshDisplay(),this.search.refreshDisplay())},MSBrowser.prototype.setDisplayAsThumbnails=function(){const e=$("#ms_browser_display_as_thumbnails",this.$topMenu),t=$("#ms_browser_display_as_list",this.$topMenu);e.hasClass("active")||(this.displayAsThumbnails=!0,t.removeClass("active").attr("title",t.text()),e.addClass("active").attr("title",e.text()+" ("+jsu.translate("selected setting")+")"),this.useOverlay||$("#global").removeClass("max-width-1200"),jsu.setCookie("catalog-displayMode","thumbnail"),this.channels.refreshDisplay(),this.latest.refreshDisplay(),this.search.refreshDisplay())},MSBrowser.prototype.setDisplayTypesIcons=function(e){this.displayTypesIcons=e,e?this.$widget.addClass("show-types-icons"):this.$widget.removeClass("show-types-icons"),jsu.setCookie("catalog-displayTypesIcons",e?"yes":"no")},MSBrowser.prototype.getActiveTab=function(){const e=$(".ms-browser-tab.active",this.$menu);let t=e.length>0?e.attr("id").replace(/_tab/g,"").replace(/ms_browser_/g,""):null;return t||this.pickMode||($(".ms-browser").hasClass("channels")?t="channels":$(".ms-browser").hasClass("latest")?t="latest":$(".ms-browser").hasClass("search")&&(t="search")),t},MSBrowser.prototype.changeTab=function(e,t){const s=this.getActiveTab();if(s!=e&&(s&&this[s]&&($(".ms-browser").removeClass(s),$("#ms_browser_"+s+"_tab",this.$menu).removeClass("active").attr("title",$("#ms_browser_"+s+"_tab",this.$menu).text()),this[s].$menu.css("display","none"),this[s].$content.css("display","none")),$(".ms-browser").addClass(e),$("#ms_browser_"+e+"_tab",this.$menu).addClass("active").attr("title",$("#ms_browser_"+e+"_tab",this.$menu).text()+" ("+jsu.translate("selected tab")+")"),this[e]&&(this[e].$menu.css("display",""),this[e].$content.css("display",""),this[e].onShow()),"latest"!=e?$(".ms-browser-channel-order",this.$topMenu).css("display",""):$(".ms-browser-channel-order",this.$topMenu).css("display","none"),!this.useOverlay&&!t)){let t;t="search"==e?this.urlSearch:"latest"==e?this.urlLatest:this.urlChannels+window.location.hash,window.history.pushState({ms_tab:e},e,t)}},MSBrowser.prototype.displayLoading=function(){if(isNaN(this.loadingCount)?this.loadingCount=1:this.loadingCount++,this.loadingTimeout)return;const e=this;this.loadingTimeout=setTimeout(function(){$(".ms-browser-loading",e.$widget).css("display","block"),e.loadingTimeout=null},500)},MSBrowser.prototype.hideLoading=function(){this.loadingCount&&this.loadingCount--,isNaN(this.loadingCount)||this.loadingCount>0||(this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=null),$(".ms-browser-loading",this.$widget).css("display",""))},MSBrowser.prototype.displayContent=function(e,t,s,n,a){if(a||(a=this.displayCount),t.channels&&t.channels.length>0){let i=[];a>0?(i=t.channels.slice(0,a),this.moreChannels=t.channels.slice(a),a-=i.length):this.moreChannels=t.channels,i.length>0&&this.displayItems(e,i,"channel",n,s)}if(t.live_streams&&t.live_streams.length>0){let s=[];a>0?(s=t.live_streams.slice(0,a),this.moreLiveStreams=t.live_streams.slice(a),a-=s.length):this.moreLiveStreams=t.live_streams,s.length>0&&this.displayItems(e,s,"live",n)}if(t.videos&&t.videos.length>0){let s=[];a>0?(s=t.videos.slice(0,a),this.moreVideos=t.videos.slice(a),a-=s.length):this.moreVideos=t.videos,s.length>0&&this.displayItems(e,s,"video",n)}if(t.photos_groups&&t.photos_groups.length>0){let s=[];a>0?(s=t.photos_groups.slice(0,a),this.morePhotosGroups=t.photos_groups.slice(a),a-=s.length):this.morePhotosGroups=t.photos_groups,s.length>0&&this.displayItems(e,s,"photos",n)}this.moreChannels.length+this.moreLiveStreams.length+this.moreVideos.length+this.morePhotosGroups.length>0?this.showMoreBtns(n):this.hideMoreBtns(n)},MSBrowser.prototype.displayItems=function(e,t,s,n,a){const i=this.pickMode?"h3":"h2",o=-1!=this.selectableContent.indexOf(s[0]);let r="";switch(s){case"channel":r=jsu.translate("Channels"),a&&"0"!=a&&(r=jsu.translate("Sub channels"));break;case"live":r=jsu.translate("Live streams");break;case"video":r=jsu.translate("Videos");break;case"photos":r=jsu.translate("Photos groups")}$("#header_type_"+s,e).length||e.append("<"+i+' id="header_type_'+s+'">'+r+"</"+i+">");let l=$("#section_type_"+s,e);l.length||(l=$('<ul id="section_type_'+s+'" class="ms-browser-section"></ul>'));for(let e=0;e<t.length;e++)"channels"==s&&void 0===t[e].parent_oid&&a&&(t[e].parent_oid=a),l.append(this.getContentEntry(s,t[e],o,n));e.append(l)},MSBrowser.prototype.showMoreBtns=function(e){$("#ms_browser_"+e+" .ms-browser-more-btn",this.place).css("display","block")},MSBrowser.prototype.hideMoreBtns=function(e){$("#ms_browser_"+e+" .ms-browser-more-btn",this.place).css("display","none")},MSBrowser.prototype.displayMore=function(e){const t=this.getActiveTab(),s={channels:this.moreChannels,live_streams:this.moreLiveStreams,videos:this.moreVideos,photos_groups:this.morePhotosGroups};"latest"===t?this.latest.displayMore(e):"channels"===t?this.displayContent(this.channels.$place,s,null,"channels",e):"search"===t&&this.displayContent(this.search.$content,s,null,"search",e)},MSBrowser.prototype.getContentEntry=function(e,t,s,n){this.updateCatalog(t);const a=t.oid,i=s&&(!this.parentSelectionOid||t.selectable),o=this.pickMode&&(i||"channel"==e);let r=null;(r=$('<li class="item-entry item-type-'+e+" item-entry-"+a+'"></li>')).attr("id","item_entry_"+a+"_"+n),r.addClass(this.displayAsThumbnails?"thumbnail":"list"),this.currentSelection&&this.currentSelection.oid==a&&(r.addClass("selected"),r.attr("title",t.title+" "+jsu.translate("selected"))),i&&r.addClass("selectable"),o&&r.addClass("clickable"),t.extra_class&&r.addClass(t.extra_class);let l=this._getEntryBlockHtml(t,e,o,n);this.displayAsThumbnails&&!this.pickMode&&(l+='<div class="item-entry-buttons">',l+='<button type="button" class="item-entry-info" title="'+jsu.translateAttribute("Open information panel")+'"><i class="fa fa-info" aria-hidden="true"></i></button>',t.can_edit&&(l+='<a title="'+jsu.translateAttribute("Edit")+'" href="'+this.getButtonLink(t,"edit")+'"'+this.linksTarget+'><i class="fa fa-pencil" aria-hidden="true"></i></a>'),l+='<div class="overlay-info ms-items" id="item_entry_'+a+"_"+n+'_info" style="display: none;" role="dialog" tabindex="-1" aria-labelledby="item_entry_'+t.oid+"_"+n+'_info_title" aria-modal="true"></div>',l+="</div>");const c=$(l);if(this._setOnClickEntryBlock(c,a,e,t,i),r.append(c),this.displayAsThumbnails)this._setThumbnailInfoBoxHtml(e,i,a,r,t,n);else{const s=this.getEntryLinks(t,e,i);s&&r.append(s)}return $(".item-entry-link",r).focus(function(){$(".item-entry").removeClass("focus"),$(this).parent().addClass("focus")}),r},MSBrowser.prototype.couldDisplay=function(e){return-1!==this.catalogFieldsToDisplay.indexOf(e)},MSBrowser.prototype._getEntryBlockHtml=function(e,t,s,n){let a="span",i="",o=' tabindex="0" role="button"';this.useOverlay||!e.slug||this.pickMode&&"channel"!=t||(a="a",o="",i=' href="'+this.getButtonLink(e,"view")+'"',"channel"!=t&&(i+=this.linksTarget));let r="<"+a+i+o+' class="item-entry-link"'+(s&&"channel"!=t?' title="'+jsu.translateAttribute("Click to select this media")+'"':"")+">",l='<span class="item-entry-preview">';l+='<span class="item-entry-preview-aligner"></span>',e.thumb&&(l+='<img src="'+jsu.escapeAttribute(e.thumb)+'" alt=""'+(e.language?' lang="'+jsu.escapeAttribute(e.language)+'"':"")+"/>"),this.pickMode||"channel"==t||(l+='<b class="item-entry-preview-play"><i class="fa fa-play fa-4x" aria-hidden="true"></i></b>'),r+=l+="</span>";let c='<span class="item-entry-content">',d='<span class="item-entry-top-bar">';if("channel"==t)d+='<span class="item-entry-layout layout-channel" title="'+jsu.translateAttribute("This item is a channel")+'"></span>';else if("photos"==t)d+='<span class="item-entry-layout layout-pgroup" title="'+jsu.translateAttribute("This item is a photos group")+'"></span>';else{d+='<span class="item-entry-layout ',e.layout?d+="layout-"+jsu.escapeAttribute(e.layout):d+="layout-video",d+='" title="';let s="live"==t?jsu.translateHTML("This item is a live stream"):jsu.translateHTML("This item is a video");e.layout&&("composition"==e.layout?s+=" ("+jsu.translateHTML("dynamic Rich Media")+")":"webinar"==e.layout?s+=" ("+jsu.translateHTML("classic Rich Media")+")":s+=" ("+jsu.escapeHTML(e.layout.replace(/_/," "))+")"),d+=s,d+='"><span class="sr-only">'+s+"</span></span>"}if(e.can_edit&&("channel"==t?e.unlisted&&(d+='<span class="item-entry-unlisted" title="'+jsu.translateAttribute("This channel is unlisted")+'"><span class="sr-only">'+jsu.translateHTML("This channel is unlisted")+"</span></span>"):(e.validated?e.unlisted?d+='<span class="item-entry-unlisted" title="'+jsu.translateAttribute("This media is published and unlisted")+'"><span class="sr-only">'+jsu.translateHTML("This media is published and unlisted")+"</span></span>":d+='<span class="item-entry-published" title="'+jsu.translateAttribute("This media is published")+'"><span class="sr-only">'+jsu.translateHTML("This media is published")+"</span></span>":d+='<span class="item-entry-notpublished" title="'+jsu.translateAttribute("This media is not published")+'"><span class="sr-only">'+jsu.translateHTML("This media is not published")+"</span></span>","video"!=t||e.ready||(d+='<span class="item-entry-notready" title="'+jsu.translateAttribute("This video is not ready")+'"><span class="sr-only">'+jsu.translateHTML("This video is not ready")+"</span></span>"))),this.couldDisplay("duration")&&e.duration&&(d+='<span class="item-entry-duration">'+jsu.escapeHTML(e.duration)+"</span>"),this.couldDisplay("language")&&e.language){d+='<span class="item-entry-language">'+this.getLangHTML(e)+"</span>"}this.displayAsThumbnails||(d+='<span class="item-entry-title"'+(e.language?' lang="'+jsu.escapeAttribute(e.language)+'"':"")+">"+jsu.escapeHTML(e.title)+"</span>"),c+=d+="</span>";let h='<span class="item-entry-bottom-bar">';if(this.displayAsThumbnails)h+='<span class="item-entry-title"'+(e.language?' lang="'+jsu.escapeAttribute(e.language)+'"':"")+">"+jsu.escapeHTML(e.title)+"</span>";else{if(this.couldDisplay("creation_date")&&e.creation&&(h+='<span class="item-entry-date">'+jsu.translateHTML("Created on")+" "+jsu.getDateDisplay(e.creation)+"</span>"),this.couldDisplay("description")&&e.short_description&&(h+='<span class="item-entry-description">'+jsu.escapeHTML($("<span>"+e.short_description+"</span>").text())+"</span>"),this.couldDisplay("license")&&e.license&&(h+='<span class="item-entry-license">'+jsu.translateHTML("License:")+" "+jsu.escapeHTML(e.license)+"</span>"),this.couldDisplay("speaker")&&e.speaker&&(h+='<span class="item-entry-speaker">'+jsu.translateHTML("Speaker:")+" "+jsu.escapeHTML(e.speaker)+"</span>"),this.couldDisplay("company")&&e.company&&(h+='<span class="item-entry-company">'+jsu.translateHTML("Company:")+" "+jsu.escapeHTML(e.company)+"</span>"),this.couldDisplay("views")&&e.views&&(h+='<span class="item-entry-views">'+e.views+" "+jsu.translate("views"),e.views_last_month&&(h+=", "+e.views_last_month+" "+jsu.translate("this month")),h+="</span>"),this.couldDisplay("storage")&&e.can_edit&&null!==e.storage_used&&void 0!==e.storage_used){const t=this.msapi.getStorageMinimalDisplay(e);t&&(h+='<span class="item-entry-storage">'+jsu.translate("Storage usage:")+" "+t+"</span>")}"latest"==n&&(this.couldDisplay("type")&&(h+='<span class="item-entry-type">'+jsu.translateHTML("Type:")+" "+jsu.translateHTML(t)+"</span>"),this.couldDisplay("add_date")&&e.add_date&&(h+='<span class="item-entry-date">'+jsu.translateHTML("Added on")+" "+jsu.getDateDisplay(e.add_date)+"</span>"),this.couldDisplay("parent")&&e.parent_title&&(h+='<span class="item-entry-parent">'+jsu.translateHTML("Parent channel:")+" "+jsu.escapeHTML(e.parent_title)+"</span>"))}if(c+=h+="</span>",r+=c+="</span>",r+="</"+a+">",!this.displayAsThumbnails&&!this.pickMode&&"search"==n&&(e.annotations||e.photos)){let t;if(r+='<span class="item-entry-extra">',e.annotations){for(r+="<span>"+jsu.translateHTML("Matching annotations:")+"</span><ul>",t=0;t<e.annotations.length;t++){const s=e.annotations[t];r+='<li><a href="'+this.getButtonLink(e,"view")+"#start="+s.time+'&autoplay"'+this.linksTarget+">",s.title&&(r+=jsu.escapeHTML(s.title)),r+=" ("+jsu.escapeHTML(s.time_display)+") ",r+="</a></li>"}r+="</ul>"}if(e.photos){for(r+="<span>"+jsu.translateHTML("Matching photos:")+"</span><ul>",t=0;t<e.photos.length;t++){const s=e.photos[t];r+='<li><a href="'+this.getButtonLink(e,"view")+"#"+s.index+'"'+this.linksTarget+">",s.title&&(r+=jsu.escapeHTML(s.title)),r+=" (#"+s.index+") ",r+="</a></li>"}r+="</ul>"}r+="</span>"}return r},MSBrowser.prototype.getLangHTML=function(e){if(e.language)return e.icon_lang?'<i aria-hidden="true" class="icon-lang '+e.icon_lang+'"></i>':'<i class="text-lang" aria-hidden="true">['+e.language+"]</i>"},MSBrowser.prototype._setOnClickEntryBlock=function(e,t,s,n,a){this.pickMode?("channel"==s||"parent"==s?e.click({obj:this,oid:t},function(e){e.data.obj.channels.displayChannel(e.data.oid),e.data.obj.changeTab("channels"),jsu.focusFirstDescendant($("#ms_browser_channels .ms-browser-channels-place")[0])}):a&&e.click({obj:this,oid:t},function(e){e.data.obj.pick(e.data.oid)}),e.keydown(function(e){"32"!=e.which&&"13"!=e.which||(e.preventDefault(),e.stopPropagation(),$(this).trigger("click"))})):n.can_delete&&$(".item-entry-pick-delete-media",e).click({obj:this,oid:t},function(e){e.data.obj.pick(e.data.oid,"delete")})},MSBrowser.prototype.getEntryLinks=function(e,t,s){let n="";if(this.pickMode){if(s){const s=this.currentSelection&&this.currentSelection.oid==e.oid,a=s?"fa-check-circle":"fa-check";let i;i="channel"==t||"current"==t?s?jsu.translate("This channel is selected"):jsu.translate("Select this channel"):s?jsu.translate("This media is selected"):jsu.translate("Select this media"),n+='<button type="button" class="'+this.btnClass+' button main item-entry-pick"><i class="fa '+a+'" aria-hidden="true"></i> <span class="hidden-below-800">'+jsu.escapeHTML(i)+"</span></button>"}}else if("current"==t){if(e.can_see_stats&&(n+='<button type="button" title="'+jsu.translateAttribute("Statistics")+'" class="'+this.btnClass+' button default item-entry-pick-stats-media"><i class="fa fa-bar-chart" aria-hidden="true"></i> <span class="hidden-below-1280">'+jsu.translateHTML("Statistics")+"</span></button>"),e.can_edit&&(n+='<a title="'+jsu.translateAttribute("Edit")+'" class="'+this.btnClass+' button default item-entry-pick item-entry-pick-edit-media" href="'+this.getButtonLink(e,"edit")+'"'+this.linksTarget+'><i class="fa fa-pencil" aria-hidden="true"></i> <span class="hidden-below-800">'+jsu.translateHTML("Edit")+"</span></a>",e.can_delete&&(n+='<button type="button" title="'+jsu.translateAttribute("Delete")+'" class="'+this.btnClass+' button danger item-entry-pick-delete-media"><i class="fa fa-trash" aria-hidden="true"></i> <span class="hidden-below-800">'+jsu.translateHTML("Delete")+"</span></button>")),e.can_add_channel){const t='<i class="fa fa-folder" aria-hidden="true"></i> <i class="fa fa-plus color-green" aria-hidden="true"></i>';n+='<a title="'+jsu.translateAttribute("Add a sub channel")+'" class="'+this.btnClass+' button item-entry-pick item-entry-pick-add-channel" href="'+this.getButtonLink(e,"addChannel")+'"'+this.linksTarget+">"+t+' <span class="hidden-below-800">'+jsu.translateHTML("Add a sub channel")+"</span></a>"}if("0"!=e.oid&&e.can_add_video){const t='<i class="fa fa-film" aria-hidden="true"></i> <i class="fa fa-plus color-green" aria-hidden="true"></i>';n+='<a title="'+jsu.translateAttribute("Add a video")+'" class="'+this.btnClass+' button item-entry-pick item-entry-pick-add-video" href="'+this.getButtonLink(e,"addVideo")+'"'+this.linksTarget+">"+t+' <span class="hidden-below-800">'+jsu.translateHTML("Add a video")+"</span></a>"}}else"channel"!=t&&this.ltiMode&&(n+='<button type="button" class="'+this.btnClass+' button default item-entry-copy" data-link="'+this.getButtonLink(e,"lti",!0)+'"><i class="fa fa-chain" aria-hidden="true"></i> <span class="hidden-below-440">'+jsu.translateHTML("Copy LTI link")+"</span></button>"),("channel"!=t&&this.ltiMode||e.can_edit||e.can_delete)&&(n+='<a class="'+this.btnClass+' button default item-entry-pick-view-media" href="'+this.getButtonLink(e,"view")+'"'+this.linksTarget+'><i class="fa fa-eye" aria-hidden="true"></i> <span class="hidden-below-440">'+jsu.translateHTML("See")+"</span></a>"),e.can_edit&&(n+='<a class="'+this.btnClass+' button item-entry-pick-edit-media default" href="'+this.getButtonLink(e,"edit")+'"'+this.linksTarget+'><i class="fa fa-pencil" aria-hidden="true"></i> <span class="hidden-below-440">'+jsu.translateHTML("Edit")+"</span></a>"),e.can_delete&&(n+='<button type="button" class="'+this.btnClass+' button item-entry-pick-delete-media danger"><i class="fa fa-trash" aria-hidden="true"></i> <span class="hidden-below-440">'+jsu.translateHTML("Delete")+"</span></button>");if(!n)return null;n='<span class="item-entry-links"><span class="item-entry-links-container">'+n+"</span></span>";const a=$(n);return"channel"!=t&&"parent"!=t||$(".item-entry-display",a).click({obj:this,item:e},function(e){e.data.obj.pickMode&&e.data.obj.channels.displayChannel(e.data.item.oid)}),s&&$(".item-entry-pick",a).click({obj:this,item:e},function(e){e.data.obj.pick(e.data.item.oid)}),!this.pickMode&&"current"==t&&e.can_see_stats&&$(".item-entry-pick-stats-media",a).click({obj:this,item:e},function(e){e.data.obj.openStatistics(e.data.item.oid)}),!this.pickMode&&e.can_delete&&$(".item-entry-pick-delete-media",a).click({obj:this,item:e},function(e){e.data.obj.pick(e.data.item.oid,"delete")}),$(".item-entry-copy",a).length>0&&$(".item-entry-copy",a).click(function(){const e=$(this),t=e.attr("data-link"),s=$('<input type="text" style="position: absolute; left: -10000px; top: 0;"/>').val(t);let n,a;$("body").append(s),s.select();try{a=(n=document.execCommand("copy"))?jsu.translate("copied"):jsu.translate("cannot copy")}catch(e){n=!1,a=jsu.translate("failed to copy"),console.log("Failed to copy to clipboard: "+e)}a='<i class="fa '+(n?"fa-check":"fa-warning")+'" aria-hidden="true"></i> '+jsu.escapeHTML(a),e.append('<span class="copy-msg">'+a+"</span>"),e.addClass("copied"),setTimeout(function(){e.removeClass("copied"),$(".copy-msg",e).remove()},1e3),s.remove()}),a},MSBrowser.prototype.getButtonLink=function(e,t,s){let n="",a="",i="";if(e&&e.oid&&(i=e.oid[0]),t||i&&""!==i&&"0"!==i||e&&"0"!=e.oid)if("view"==t)e.slug||"0"==e.oid||this.getInfoForOid(e.oid,!1,function(t){e=t.info}),"0"==i?(n="/channels/",a="#"):"c"==i?(n="/channels/",a="#"+e.slug):("l"==i?n="/lives/"+e.slug+"/":"v"==i?n="/videos/"+e.slug+"/":"p"==i&&(n="/photos/"+e.slug+"/"),n&&this.iframeMode&&(n+="iframe/"));else if("lti"==t)n="/lti/"+e.oid+"/";else if("edit"==t)n=this.iframeMode?"/edit/iframe/"+e.oid+"/":"/edit/"+e.oid+"/";else if("addChannel"==t)n="/add-content/channel/?in="+(e&&"0"!=e.oid?e.oid:"root");else{if("addVideo"!=t)return console.error("Unrecognized action specified in MSBrowser.prototype.getButtonLink call:",e,t,s),"";n="/add-content/",a="#add_media_by_upload",e&&"0"!=e.oid&&(n+="?in="+e.oid)}else n="/channels/",a="#";return s&&(n=window.location.protocol+"//"+window.location.host+n),this.linksUrlParams&&"lti"!=t&&(n+=(n.indexOf("?")<0?"?":"&")+this.linksUrlParams),n+a},MSBrowser.prototype._getThumbnailInfoBoxHtml=function(e,t,s,n){let a='<div><div tabindex="0"></div>';if(a+='<div class="trap-focus">',a+='<div class="overlay-info-title" id="item_entry_'+e.oid+"_"+n+'_info_title" >',a+='<button type="button" class="overlay-info-close button default '+this.btnClass+'" title="'+jsu.translateAttribute("Hide this window")+'" aria-label="'+jsu.translateAttribute("Hide this window")+'"><i class="fa fa-close" aria-hidden="true"></i></button>',a+='<h1><a href="'+this.getButtonLink(e,"view")+'"'+this.linksTarget+">"+jsu.escapeHTML(e.title)+"</a></h1>",a+="</div>",a+='<div class="overlay-info-content">',!this.pickMode&&"search"==n&&(e.annotations||e.photos)){if(e.annotations){a+="<div><b>"+jsu.translateHTML("Matching annotations:")+"</b></div>",a+="<ul>";for(let t=0;t<e.annotations.length;t++){const s=e.annotations[t];a+='<li><a href="'+this.getButtonLink(e,"view")+"#start="+s.time+'&autoplay"'+this.linksTarget+">",s.title&&(a+=jsu.escapeHTML(s.title)),a+=" ("+jsu.escapeHTML(s.time_display)+") ",a+="</a></li>"}a+="</ul>"}if(e.photos){a+="<div><b>"+jsu.translate("Matching photos:")+"</b></div>",a+="<ul>";for(let t=0;t<e.photos.length;t++){const s=e.photos[t];a+='<li><a href="'+this.getButtonLink(e,"view")+"#"+s.index+'"'+this.linksTarget+">",s.title&&(a+=jsu.escapeHTML(s.title)),a+=" (#"+s.index+") ",a+="</a></li>"}a+="</ul>"}a+="<hr/>"}if(a+='<table class="overlay-info-table">',a+='<caption class="sr-only">'+jsu.translateHTML("Media information")+"</caption>",this.couldDisplay("creation_date")&&e.creation&&"video"==t&&(a+="<tr>",a+='<th scope="row" class="overlay-info-label">'+jsu.translateHTML("Recording date")+" :</th>",a+="<td>"+jsu.getDateDisplay(e.creation)+"</td>",a+="</tr>"),this.couldDisplay("add_date")&&e.add_date&&(a+="<tr>",a+='<th scope="row" class="overlay-info-label">'+jsu.translateHTML("Publishing date")+" :</th>",a+="<td>"+jsu.getDateDisplay(e.add_date)+"</td>",a+="</tr>"),this.couldDisplay("duration")&&e.duration&&(a+="<tr>",a+='<th scope="row" class="overlay-info-label">'+jsu.translateHTML("Duration")+" :</th>",a+="<td>"+jsu.escapeHTML(e.duration)+"</td>",a+="</tr>"),this.couldDisplay("views")&&e.views_last_month&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("Views last month")+" :</th><td>"+e.views_last_month+"</td></tr>"),this.couldDisplay("views")&&e.views&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("Views")+" :</th><td>"+e.views+"</td></tr>"),this.couldDisplay("annotations")&&e.comments_last_month&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("Annotations last month")+" :</th><td>"+e.comments_last_month+"</td></tr>"),this.couldDisplay("annotations")&&e.comments&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("Annotations")+" :</th><td>"+e.comments+"</td></tr>"),this.couldDisplay("storage")&&e.can_edit&&null!==e.storage_used&&void 0!==e.storage_used){const t=this.msapi.getStorageMinimalDisplay(e);t&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("Storage usage")+" :</th><td>"+t+"</td></tr>")}this.couldDisplay("license")&&e.license&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("License")+" :</th><td>"+jsu.escapeHTML(e.license)+"</td></tr>"),this.couldDisplay("speaker")&&e.speaker&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("Speaker")+" :</th><td>"+jsu.escapeHTML(e.speaker)+"</td></tr>"),this.couldDisplay("company")&&e.company&&(a+='<tr><th scope="row" class="overlay-info-label">'+jsu.translateHTML("Company")+" :</th><td>"+jsu.escapeHTML(e.company)+"</td></tr>"),a+="</table>",this.couldDisplay("description")&&e.short_description&&(a+="<hr/>",a+="<p>"+jsu.escapeHTML($("<span>"+e.short_description+"</span>").text())+"</p>"),a+="</div>",a+="</div>",a+='<div tabindex="0"></div></div>';const i=$(a),o=this.getEntryLinks(e,t,s);return o&&$(".overlay-info-content",i).append(o),$(".overlay-info-close",i).click({obj:this},function(e){e.data.obj.boxHideInfo()}),$(document).keydown({obj:this},function(t){$("#item_entry_"+e.oid+"_"+n+"_info").length&&27==t.keyCode&&(t.stopImmediatePropagation(),t.data.obj.boxHideInfo())}),i},MSBrowser.prototype._setThumbnailInfoBoxHtml=function(e,t,s,n,a,i){$(".item-entry-info",n).click({obj:this,$entry:n},function(o){const r="#"+n.attr("id")+"_info";if(o.data.obj.previousFocus=this,""===$(r,o.data.$entry).html())if("search"==i){const s=o.data.obj._getThumbnailInfoBoxHtml(a,e,t,i);$(r,o.data.$entry).append(s),o.data.obj.boxOpenInfo(n)}else o.data.obj.getInfoForOid(s,!0,function(s){const a=s.info;o.data.obj.updateCatalog(s.info);const l=o.data.obj._getThumbnailInfoBoxHtml(a,e,t,i);$(r,o.data.$entry).append(l),o.data.obj.boxOpenInfo(n)});else o.data.obj.boxOpenInfo(n)})},MSBrowser.prototype.trapFocus=function(e,t){jsu.ignoreUntilFocusChanges||(e.contains(t.target)?this.lastOverlayFocus=t.target:(jsu.focusFirstDescendant(e),this.lastOverlayFocus==document.activeElement&&jsu.focusLastDescendant(e),this.lastOverlayFocus=document.activeElement))},MSBrowser.prototype.boxOpenInfo=function(e){this.boxHideInfo();const t="#"+e.attr("id")+"_info",s=$(t);if(s.hasClass("moved")||s.addClass("moved").detach().appendTo("body"),!s.is(":visible")){const n=$(".item-entry-preview",e),a=parseInt(n.offset().top,10)-1;let i=parseInt(n.offset().left,10)+n.width(),o="auto";$(window).width()/2-i<0&&(i="auto",o=$(window).width()-parseInt(n.offset().left,10)),s.css("left",i+"px"),s.css("right",o+"px"),s.css("top",a+"px"),$(".item-entry-info",e).addClass("info-displayed"),s.fadeIn("fast"),this.lastOverlayFocus=document.activeElement,s.focusin(this.trapFocus.bind(this,$(".trap-focus",s)[0])),jsu.focusFirstDescendant($(".trap-focus",s)[0]),this.boxClickHandler&&$(document).unbind("click",this.boxClickHandler);const r=this;this.boxClickHandler=function(e){$(e.target).closest(t).length||$(e.target).closest(".item-entry-info").length||!$(t).is(":visible")||r.boxHideInfo()},$(document).click(this.boxClickHandler)}},MSBrowser.prototype.boxHideInfo=function(){$(".overlay-info:visible").length&&($(".overlay-info:visible").off("focusin"),this.lastOverlayFocus=document.activeElement,$(".overlay-info:visible").fadeOut("fast"),$(".item-entry-info.info-displayed").removeClass("info-displayed"),this.previousFocus&&this.previousFocus.focus())},MSBrowser.prototype.displayCategories=function(){const e=this;if(this.siteSettingsCategories.length>0){let t=' <button type="button" id="open_hidden_categories" class="button">'+jsu.translate("Categories")+' <i class="fa fa-angle-down" aria-hidden="true"></i></button>';t+=' <div id="hidden_categories" class="hidden-visibility">',t+=' <label for="filter_no_categories"><input id="filter_no_categories" type="checkbox"/><span>'+jsu.translateHTML("Unspecified")+"</span></label><br />";for(let e=0;e<this.siteSettingsCategories.length;e++){const s=jsu.escapeAttribute(this.siteSettingsCategories[e][0]),n=jsu.escapeHTML(this.siteSettingsCategories[e][1]),a=this.filterCategories.indexOf(s)<0?"":' checked="checked"';t+=' <label for="'+s+'"><input class="checkbox" id="'+jsu.escapeAttribute(s)+'" type="checkbox" value="'+jsu.escapeAttribute(s)+'"'+a+"/><span>"+jsu.escapeHTML(n)+"</span></label>"}t+=" </div>",$(".ms-browser-filters",this.$topMenu).append(t),$("#open_hidden_categories",this.$topMenu).click(function(){$("#hidden_categories").hasClass("hidden-visibility")?($(".fa",this).removeClass("fa-angle-down").addClass("fa-angle-up"),$("#hidden_categories").removeClass("hidden-visibility")):($("#hidden_categories").addClass("hidden-visibility"),$(".fa",this).removeClass("fa-angle-up").addClass("fa-angle-down"))}),$("#hidden_categories .checkbox",this.$topMenu).click(function(){const t=this.checked;e.filterNoCategories=!1,$("#filter_no_categories",e.$topMenu).prop("checked",!1),t?e.filterCategories.push(this.value):e.filterCategories.splice(e.filterCategories.indexOf(this.value),1),e.channels.refreshDisplay(!0),e.latest.refreshDisplay(!0),e.search.refreshDisplay(!0)}),$("#filter_no_categories",this.$topMenu).click(function(){this.checked?(e.filterCategories=[],$("#hidden_categories .checkbox",e.$topMenu).prop("checked",!1),e.filterNoCategories=!0,e.channels.refreshDisplay(!0),e.latest.refreshDisplay(!0),e.search.refreshDisplay(!0)):(e.filterNoCategories=!1,e.channels.refreshDisplay(!0),e.latest.refreshDisplay(!0),e.search.refreshDisplay(!0))})}},MSBrowser.prototype.removeOidFromTab=function(e,t){if($(".item-entry-"+t,e.$content).remove(),e.lastResponse){const s=["items","channels","live_streams","videos","photos_groups"];for(let n=0;n<s.length;n++){let a=-1;if(e.lastResponse[s[n]])for(let i=0;i<e.lastResponse[s[n]].length;i++)if(e.lastResponse[s[n]][i].oid==t){a=i;break}if(-1!=a){e.lastResponse[s[n]].splice(a,1);break}}}},MSBrowser.prototype.openStatistics=function(e){this.overlayStats||(this.overlayStats=new OverlayDisplayManager),this.overlayStats.show({title:jsu.translate("See statistics on this channel"),iframe:"/statistics/iframe/"+e+"/?period=last_year"})},MSBrowserLatest.prototype.getDisplayableContent=function(){let e=this.browser.displayableContent;return e.length>1&&this.browser.ltiMode&&-1!=e.indexOf("c")&&(e=e.replace(/c/g,"")),e},MSBrowserLatest.prototype.getMenuJq=function(){const e=this.getDisplayableContent();let t="";return t+='<div id="ms_browser_latest_menu" style="display: none;">',e.length>1&&(t+='<div class="ms-browser-dropdown" id="ms_browser_latest_types_dropdown">',t+='<button type="button" aria-controls="ms_browser_latest_types_dropdown_menu" aria-expanded="false" class="button ms-browser-dropdown-button '+this.browser.btnClass+'">'+jsu.translateHTML("Content types")+' <i class="fa fa-angle-down" aria-hidden="true"></i></button>',t+='<div class="ms-browser-dropdown-menu ms-browser-latest-types" id="ms_browser_latest_types_dropdown_menu">',t+="<h4>"+jsu.translateHTML("Content types to display:")+"</h4>",-1!=e.indexOf("c")&&(t+='<p><input id="latest_display_channel" type="checkbox">',t+=' <label for="latest_display_channel">'+jsu.translateHTML("channels")+"</label></p>"),-1!=e.indexOf("v")&&(t+='<p><input id="latest_display_video" type="checkbox">',t+=' <label for="latest_display_video">'+jsu.translateHTML("videos")+"</label></p>"),-1!=e.indexOf("l")&&(t+='<p><input id="latest_display_live" type="checkbox">',t+=' <label for="latest_display_live">'+jsu.translateHTML("live streams")+"</label></p>"),-1!=e.indexOf("p")&&(t+='<p><input id="latest_display_photos" type="checkbox">',t+=' <label for="latest_display_photos">'+jsu.translateHTML("photos")+"</label></p>"),t+="</div>",t+="</div>"),t+="</div>",this.$menu=$(t),e.length>1&&(this.browser.setupDropdown($("#ms_browser_latest_types_dropdown",this.$menu)),$(".ms-browser-latest-types input",this.$menu).change({obj:this},function(e){e.data.obj.refreshDisplay(!0);const t=this.id.split("_")[2][0];let s=jsu.getCookie("catalog-lastestTypes");s||(s="vlp"),this.checked?-1==s.indexOf(t)&&(s+=t):s=s.replace(new RegExp(t),""),jsu.setCookie("catalog-lastestTypes",s)})),this.$menu},MSBrowserLatest.prototype.getContentJq=function(){const e='<div id="ms_browser_latest" class="ms-browser-content" style="display: none;"><div class="messages"><div class="message info">'+jsu.translateHTML("This list presents all media and channels ordered by add date.")+'</div></div><div class="ms-browser-latest-place"></div>'+this.browser.getMoreButton()+"</div>";return this.$content=$(e),this.$place=$(".ms-browser-latest-place",this.$content),this.$content},MSBrowserLatest.prototype.onShow=function(){if(this.browser.setTitle("latest",jsu.translate("Latest content added")),this.initialized)return;if(this.initialized=!0,this.getDisplayableContent().length>1){let e=jsu.getCookie("catalog-lastestTypes");e||(e="vlp"),$(".ms-browser-latest-types #latest_display_channel",this.$menu).prop("checked",-1!=e.indexOf("c")),$(".ms-browser-latest-types #latest_display_video",this.$menu).prop("checked",-1!=e.indexOf("v")),$(".ms-browser-latest-types #latest_display_live",this.$menu).prop("checked",-1!=e.indexOf("l")),$(".ms-browser-latest-types #latest_display_photos",this.$menu).prop("checked",-1!=e.indexOf("p"))}this.loadLatest(this.browser.displayCount)},MSBrowserLatest.prototype.loadLatest=function(e,t){if(this.latestLoading)return;this.latestLoading=!0;const s=this.getDisplayableContent(),n={};s.length>1?(n.content="",-1!=s.indexOf("c")&&$("#latest_display_channel",this.$menu).is(":checked")&&(n.content+="c"),-1!=s.indexOf("v")&&$("#latest_display_video",this.$menu).is(":checked")&&(n.content+="v"),-1!=s.indexOf("l")&&$("#latest_display_live",this.$menu).is(":checked")&&(n.content+="l"),-1!=s.indexOf("p")&&$("#latest_display_photos",this.$menu).is(":checked")&&(n.content+="p")):s&&(n.content=s),null!==this.browser.filterEditable&&(n.editable=this.browser.filterEditable?"yes":"no"),null!==this.browser.filterValidated&&(n.validated=this.browser.filterValidated?"yes":"no"),null!==this.browser.filterSpeaker&&(n.speaker=this.browser.filterSpeaker),this.browser.filterNoCategories?n.no_categories=!0:this.browser.filterCategories.length>0&&(n.categories=this.browser.filterCategories.join("\n"));let a=0;if(this.startDate&&(n.start=this.startDate,a=parseInt(this.startDate.replace(new RegExp("[-_]","g"),""),10),isNaN(a)&&(a=0)),t){const e=parseInt(t.replace(new RegExp("[-_]","g"),""),10);if(a>0&&!isNaN(e)&&e>=a)return this.latestLoading=!1,void console.log("cancelled");n.end=t}e&&(n.count=e);const i=this;this.browser.displayLoading(),this.browser.msapi.ajaxCall("getLatestContent",n,function(e){e.items&&e.items.length>0&&(i.lastResponse?i.lastResponse.items=i.lastResponse.items.concat(e.items):i.lastResponse=e),i._onAjaxResponse(e),i.latestLoading=!1})},MSBrowserLatest.prototype._onAjaxError=function(e){let t='<div class="messages">';if(this.browser.useOverlay||"403"!=e.errorCode&&"401"!=e.errorCode)t+='<div class="message error">'+jsu.escapeHTML(e.error)+"</div>";else{const s=this.browser.urlLogin+"?next="+window.location.pathname+(window.location.hash?window.location.hash.substring(1):"");t+='<div class="item-description"><div class="message error">'+jsu.escapeHTML(e.error)+"</div><p>"+jsu.translateHTML("Please login to access this page")+'<br /> <a href="'+s+'">'+jsu.translateHTML("Sign in")+"</a></p></div>"}t+="</div>",this.$place.html(t)},MSBrowserLatest.prototype._onAjaxResponse=function(e){if(this.browser.hideLoading(),!e.success)return this._onAjaxError(e);this.startDate=e.max_date,this.more=!0===e.more;for(let t=0;t<e.items.length;t++){const s=e.items[t];if(s.date_label&&s.date_label!=this.dateLabel){this.dateLabel=s.date_label;const e=this.browser.pickMode?"h3":"h2";this.$place.append("<"+e+">"+this.dateLabel+"</"+e+">"),this.$section=$('<ul class="ms-browser-section"></ul>'),this.$place.append(this.$section)}else this.$section||(this.$section=$('<ul class="ms-browser-section"></ul>'),this.$place.append(this.$section),console.log("A browser section is missing in latest tab. This should not happen.",s.date_label,this.dateLabel));let n;n="v"==s.type?"video":"l"==s.type?"live":"p"==s.type?"photos":"channel";const a=-1!=this.browser.selectableContent.indexOf(s.type);this.$section.append(this.browser.getContentEntry(n,s,a,"latest"))}if(null===this.$section){const e=$('<div class="messages"><div class="message info">'+jsu.translate("No contents.")+"</div></div>");this.$place.append(e)}this.more?this.browser.showMoreBtns("latest"):this.browser.hideMoreBtns("latest")},MSBrowserLatest.prototype.displayMore=function(e){this.more&&this.loadLatest(e)},MSBrowserLatest.prototype.refreshDisplay=function(e){e&&(this.lastResponse=null),this.lastResponse?(this.dateLabel="",this.$section=null,this.$place.html(""),this._onAjaxResponse(this.lastResponse)):(this.more=!1,this.startDate="",this.dateLabel="",this.$section=null,this.$place.html(""),this.loadLatest(this.browser.displayCount))},MSBrowserLatest.prototype.remove=function(e){this.browser.removeOidFromTab(this,e)},MSBrowserSearch.prototype.getDisplayableContent=function(){let e=this.browser.displayableContent;return e.length>1&&this.browser.ltiMode&&-1!=e.indexOf("c")&&(e=e.replace(/c/g,"")),e},MSBrowserSearch.prototype.shouldBeDisplayed=function(e,t){if(!t)return!0;for(let s=0;s<e.length;s++)if(-1!=t.indexOf(e[s]))return!0;return!1},MSBrowserSearch.prototype.getMenuJq=function(){const e=this.getDisplayableContent();let t='<div id="ms_browser_search_menu" style="display: none;"><form class="ms-browser-search-form" method="get" action="." onsubmit="javascript: return false;"><label for="ms_browser_search_text"><span class="hidden-below-800">'+jsu.translateHTML("Search:")+'</span></label> <input id="ms_browser_search_text" type="text" value=""> <button type="submit" class="button" id="ms_browser_search_start">'+jsu.translateHTML("Go")+'</button></form><div class="ms-browser-dropdown" id="ms_browser_search_in_dropdown"><button type="button" aria-controls="ms_browser_search_in_dropdown_menu" aria-expanded="false" class="button ms-browser-dropdown-button '+this.browser.btnClass+'">'+jsu.translate("Search in")+' <i class="fa fa-angle-down" aria-hidden="true"></i></button><div class="ms-browser-dropdown-menu ms-browser-search-in" id="ms_browser_search_in_dropdown_menu"> <div><button type="button" class="button" id="ms_browser_search_in_all">'+jsu.translateHTML("all")+'</button> <button type="button" class="button" id="ms_browser_search_in_none">'+jsu.translateHTML("none")+"</button></div>";for(let s=0;s<this.searchInFields.length;s++){const n=this.searchInFields[s];this.shouldBeDisplayed(e,n.items)&&(t+=' <div><input id="ms_browser_search_'+n.name+'" type="checkbox" '+(n.initial?'checked="checked"':"")+">",t+=' <label for="ms_browser_search_'+n.name+'">'+n.label+"</label></div>")}if(t+="</div></div>",e.length>1){t+='<div class="ms-browser-dropdown" id="ms_browser_search_for_dropdown"><button type="button" aria-controls="ms_browser_search_for_dropdown_menu" aria-expanded="false" class="button ms-browser-dropdown-button '+this.browser.btnClass+'">'+jsu.translateHTML("Search for")+' <i class="fa fa-angle-down" aria-hidden="true"></i></button><div class="ms-browser-dropdown-menu ms-browser-search-for" id="ms_browser_search_for_dropdown_menu"> <div><button type="button" class="button" id="ms_browser_search_for_all">'+jsu.translateHTML("all")+'</button> <button type="button" class="button" id="ms_browser_search_for_none">'+jsu.translateHTML("none")+"</button></div>";for(let s=0;s<this.searchForFields.length;s++){const n=this.searchForFields[s];this.shouldBeDisplayed(e,n.items)&&(t+=' <div><input id="ms_browser_search_'+n.name+'" type="checkbox" '+(n.initial?'checked="checked"':"")+">",t+=' <label for="ms_browser_search_'+n.name+'">'+n.label+"</label></div>")}t+="</div></div>"}return t+="</div>",this.$menu=$(t),this.browser.setupDropdown($("#ms_browser_search_in_dropdown",this.$menu)),this.browser.setupDropdown($("#ms_browser_search_for_dropdown",this.$menu)),$("form",this.$menu).submit({obj:this},function(e){e.data.obj.onSearchSubmit()}),$("#ms_browser_search_in_all",this.$menu).click({obj:this},function(e){$(".ms-browser-search-in input[type=checkbox]",e.data.obj.$menu).prop("checked",!0),e.data.obj.onSearchSubmit()}),$("#ms_browser_search_in_none",this.$menu).click({obj:this},function(e){$(".ms-browser-search-in input[type=checkbox]",e.data.obj.$menu).prop("checked",!1),e.data.obj.onSearchSubmit()}),$("#ms_browser_search_for_all",this.$menu).click({obj:this},function(e){$(".ms-browser-search-for input[type=checkbox]",e.data.obj.$menu).prop("checked",!0),e.data.obj.onSearchSubmit()}),$("#ms_browser_search_for_none",this.$menu).click({obj:this},function(e){$(".ms-browser-search-for input[type=checkbox]",e.data.obj.$menu).prop("checked",!1),e.data.obj.onSearchSubmit()}),$("input[type=checkbox]",this.$menu).change({obj:this},function(e){e.data.obj.onSearchSubmit()}),this.$menu},MSBrowserSearch.prototype.getContentJq=function(){const e='<div id="ms_browser_search" class="ms-browser-content" style="display: none;"><div class="ms-browser-search-place"><div class="messages"><div class="message info">'+jsu.translateHTML("Use the input above to search for something.")+"</div></div></div>"+this.browser.getMoreButton()+"</div>";return this.$content=$(e),this.$place=$(".ms-browser-search-place",this.$content),this.$content},MSBrowserSearch.prototype.onShow=function(){this.browser.setTitle(this.currentTitle?this.currentTitle:jsu.translate("Search")),this.initialized||(this.initialized=!0,this.browser.hideMoreBtns("search"),this.onUrlChange(),this.browser.useOverlay||"search"!=this.browser.getActiveTab()||$("#top_search_form form").submit({obj:this},function(e){return $("#ms_browser_search_text").val($("#top_search_input").val()),e.data.obj.onSearchSubmit(),!1}))},MSBrowserSearch.prototype.setOrder=function(e){this.order=e||"default",this.refreshDisplay(!0)},MSBrowserSearch.prototype.onUrlChange=function(){if(!this.initialized)return;const e=this.browser.parseUrl(),t=this.getDisplayableContent();for(let s=0;s<this.searchInFields.length;s++){const n=this.searchInFields[s];if(this.shouldBeDisplayed(t,n.items)){let t;t=e.hasInVals?Boolean(e[n.name]):n.initial,$("#ms_browser_search_"+n.name,this.$menu).prop("checked",t)}}for(let s=0;s<this.searchForFields.length;s++){const n=this.searchForFields[s];if(this.shouldBeDisplayed(t,n.items)){let t;t=e.hasForVals?Boolean(e[n.name]):n.initial,$("#ms_browser_search_"+n.name,this.$menu).prop("checked",t)}}e.text&&($("#ms_browser_search_text",this.$menu).val(e.text),this.onSearchSubmit(!0))},MSBrowserSearch.prototype.onSearchSubmit=function(e){const t=$("#ms_browser_search_text",this.$menu).val();if(!t)return;this.browser.displayLoading();const s=this.getDisplayableContent();let n="text="+t,a="";for(let e=0;e<this.searchInFields.length;e++){const t=this.searchInFields[e];if(this.shouldBeDisplayed(s,t.items)){$("#ms_browser_search_"+t.name,this.$menu).is(":checked")&&(a+=t.name.substring(2),n+="&"+t.name)}}a=a?a.substring(1):"metadata";let i="";for(let e=0;e<this.searchForFields.length;e++){const t=this.searchForFields[e];if(this.shouldBeDisplayed(s,t.items)){$("#ms_browser_search_"+t.name,this.$menu).is(":checked")&&(i+=t.name.substring(4,5),n+="&"+t.name)}}i||(i=s);const o={search:t,content:i,order_by:this.order,fields:a};null!==this.browser.filterEditable&&(o.editable=this.browser.filterEditable?"yes":"no"),null!==this.browser.filterValidated&&(o.validated=this.browser.filterValidated?"yes":"no"),null!==this.browser.filterSpeaker&&(o.speaker=this.browser.filterSpeaker),this.browser.filterNoCategories?o.no_categories=!0:this.browser.filterCategories.length>0&&(o.categories=this.browser.filterCategories.join("\n"));const r=jsu.escapeHTML(jsu.translate("Search results for:")+" "+t);if(this.currentTitle=r,this.browser.setTitle(r),!this.browser.pickMode&&!e){let e=this.browser.urlSearch;e.indexOf("?")<0?e+="?"+n:e+="&"+n,this.lastUrl&&this.lastUrl==e||(this.lastUrl=e,window.history.pushState({ms_tab:"search",search:t},r,e))}const l=this;this.browser.msapi.ajaxCall("search",o,function(e){l._onAjaxResponse(e),window.gaPageview&&window.gaPageview("ajax search","/ajax_search?search="+o.search+"&fields="+o.fields)})},MSBrowserSearch.prototype._onAjaxError=function(e){this.lastResponse=null;let t='<div class="messages">';if(this.browser.useOverlay||"403"!=e.errorCode&&"401"!=e.errorCode)t+='<div class="message error">'+jsu.escapeHTML(e.error)+"</div>";else{const s=this.browser.urlLogin+"?next="+window.location.pathname+(window.location.hash?window.location.hash.substring(1):"");t+='<div class="item-description"><div class="message error">'+jsu.escapeHTML(e.error)+"</div><p>"+jsu.translateHTML("Please login to access this page")+'<br /> <a href="'+s+'">'+jsu.translate("Sign in")+"</a></p></div>"}t+="</div>",this.$place.html(t)},MSBrowserSearch.prototype._onAjaxResponse=function(e){if(this.browser.hideLoading(),this.browser.moreChannels=[],this.browser.moreLiveStreams=[],this.browser.moreVideos=[],this.browser.morePhotosGroups=[],this.browser.hideMoreBtns("search"),!e.success)return this._onAjaxError(e);this.lastResponse=e;const t=e.channels?e.channels.length:0,s=e.videos?e.videos.length:0,n=e.live_streams?e.live_streams.length:0,a=e.photos_groups?e.photos_groups.length:0,i=t>0||s>0||n>0||a>0;if(this.$place.html(""),i){const i=[];t>0&&i.push(t+" "+jsu.translate("channel(s)")),s>0&&i.push(s+" "+jsu.translate("video(s)")),n>0&&i.push(n+" "+jsu.translate("live stream(s)")),a>0&&i.push(a+" "+jsu.translate("photos group(s)"));const o='<div class="ms-browser-search-matching"><b>'+jsu.translateHTML("Matching items:")+"</b> "+jsu.escapeHTML(i.join(", "))+"</div>";this.$place.append(o),this.browser.displayContent(this.$place,e,null,"search")}else this.$place.html('<div class="messages"><div class="message info">'+jsu.translateHTML("No results.")+"</div></div>")},MSBrowserSearch.prototype.refreshDisplay=function(e){e&&this.lastResponse&&(this.lastResponse=null),this.lastResponse?this._onAjaxResponse(this.lastResponse):this.onSearchSubmit(!0)},MSBrowserSearch.prototype.remove=function(e){this.browser.removeOidFromTab(this,e)},MSBrowser.prototype.init=function(){if(this.initialized)return;this.initialized=!0,"thumbnail"==jsu.getCookie("catalog-displayMode")&&(this.displayAsThumbnails=!0,this.useOverlay||$("#container").removeClass("max-width-1200")),"yes"==jsu.getCookie("catalog-displayTypesIcons")&&(this.displayTypesIcons=!0);const e=this.parseUrl();if(!this.useOverlay){this.pickMode=!1;const t=[];if(e.iframe&&(this.iframeMode=!0,this.urlLogin="/login/iframe/",t.push("iframe")),e.login&&t.push("login="+window.encodeURIComponent(e.login)),this.hideHeader&&t.push("header=no"),e.speaker&&(this.filterSpeaker=e.speaker,t.push("speaker="+window.encodeURIComponent(this.filterSpeaker))),e.mine&&(this.filterSpeaker="self",t.push("mine"),this.treeManager=!1),e.lti&&(this.ltiMode=!0,t.push("lti")),e.newtab&&(this.linksTarget=' target="Blank"',t.push("newtab")),e.categories&&(this.filterCategories=e.categories.toString().split(","),t.push("categories="+window.encodeURIComponent(e.categories))),e.pick&&(this.pickMode=!0,e.pick.toString().match(/^[cvlp]+$/)?(this.selectableContent=e.pick,this.displayableContent=e.pick,this.displayableContent.indexOf("c")<0&&(this.displayableContent="c"+this.displayableContent)):(this.selectableContent="vlp",this.displayableContent="cvlp"),t.push("pick="+this.selectableContent),!this.initialOid&&e.initial&&(this.initialOid=e.initial.toString(),t.push("initial="+window.encodeURIComponent(this.initialOid)))),e.return&&(window.parent&&0===e.return.toString().indexOf("postMessageAPI")||0===e.return.toString().indexOf("https://")&&e.return.toString().length>8)){let s;this.pickMode||(this.pickMode=!0,this.selectableContent="vlp",this.displayableContent="cvlp",t.push("pick="+this.selectableContent)),t.push("return="+e.return),s=window.parent&&0===e.return.toString().indexOf("postMessageAPI")?e.return:this.urlPostLink+"?return="+e.return,this.onPick=function(e,t){if(!t)if(0===s.indexOf("postMessageAPI")){const n=window.opener?window.opener.parent:window.parent,a=s.substring("postMessageAPI".length).replace(/^:+|:+$/g,"");console.log("Posting message:",{item:e,initialPick:Boolean(t),target:a}),n.postMessage({item:e,initialPick:Boolean(t),target:a},"*"),window.opener&&window.close()}else window.location=s+"&oid="+e.oid}}t.length>0&&(this.linksUrlParams=t.join("&"),this.urlLogin+="?"+this.linksUrlParams,this.urlChannels+="?"+this.linksUrlParams,this.urlLatest+="?"+this.linksUrlParams,this.urlSearch+="?"+this.linksUrlParams)}this.initOptions.browser=this,this.currentSelection&&this.currentSelection.oid&&(0!==this.currentSelection.oid.indexOf("c")&&isNaN(parseInt(this.currentSelection.oid,10))?this.initOptions.currentChannelOid=this.currentSelection.parent_oid:this.initOptions.currentChannelOid=this.currentSelection.oid),this.channels=new MSBrowserChannels(this.initOptions),this.latest=new MSBrowserLatest(this.initOptions),this.search=new MSBrowserSearch(this.initOptions),this.buildWidget(),this.initialState&&this.initialState.tab?this.changeTab(this.initialState.tab,!0):this.changeTab("channels",!0),this.initialOid&&this.pick(this.initialOid,null,!0);const t=this;this.useOverlay?this.overlay=new OverlayDisplayManager:$(window).bind("hashchange",function(){t.onUrlChange()}),this.loadCategories(),$(window).resize(function(){t.onResize()}),this.onResize()},MSBrowser.prototype.open=function(){this.useOverlay&&(this.init(),this.overlay.show({title:this.title,html:this.$widget}))},MSBrowser.prototype.updateCatalog=function(e,t){if(e&&e.oid)if(this.catalog[e.oid]){let s;for(s in e)this.catalog[e.oid][s]=e[s];t&&(this.catalog[e.oid].is_full=!0)}else t&&(e.is_full=!0),this.catalog[e.oid]=e},MSBrowser.prototype.getInfoForOid=function(e,t,s){const n=e&&("v"==e[0]||"l"==e[0]||"p"==e[0]);return this.getInfo({oid:e},n,t,s)},MSBrowser.prototype.getInfoForSlug=function(e,t,s,n){return this.getInfo({slug:e},t,s,n)},MSBrowser.prototype.getInfo=function(e,t,s,n){if(!e.oid&&!e.slug||!n)return;const a=e.oid?"oid":"slug";let i,o=null;for(i in this.catalog)if((!t&&"c"==i[0]||t&&"c"!=i[0])&&this.catalog[i][a]==e[a]){s?this.catalog[i].is_full&&(o=this.catalog[i]):o=this.catalog[i];break}if(o)return n({success:!0,info:o});this.displayLoading(),s&&(e.full="yes");const r=t?"getMedias":"getChannels",l=this;this.msapi.ajaxCall(r,e,function(e){e.success&&l.updateCatalog(e.info,s),l.hideLoading(),n(e)})},MSBrowser.prototype.pick=function(e,t,s){if(null==e)return void(this.currentSelection&&this.currentSelection.oid&&$(".item-entry-"+this.currentSelection.oid,this.$main).removeClass("selected"));if(this.catalog[e]&&this.catalog[e].is_full)return void this._pick(e,{success:!0,info:this.catalog[e]},t,s);const n=this;this.getInfoForOid(e,!0,function(a){n._pick(e,a,t,s)})},MSBrowser.prototype._pick=function(e,t,s,n){t.success?this.pickMode?(this.currentSelection&&this.currentSelection.oid&&$(".item-entry-"+this.currentSelection.oid,this.$main).removeClass("selected"),this.currentSelection=this.catalog[e],$(".item-entry-"+this.currentSelection.oid,this.$main).addClass("selected"),this.overlay&&!n&&this.overlay.hide(),this.onPick&&this.onPick(this.catalog[e],n),!this.useOverlay&&t.info.parent_slug&&(window.location.hash="#"+t.info.parent_slug),!this.channels||n&&this.initialState&&this.initialState.channelSlug||(0!==e.indexOf("c")&&isNaN(parseInt(e,10))?this.channels.displayChannel(t.info.parent_oid):this.channels.displayChannel(e))):"delete"==s&&window.deleteFormManager&&window.deleteFormManager.show(e,this.catalog[e].title):console.log("Unable to get info about initial selection:"+t.error)},MSBrowser.prototype.remove=function(e){e&&this.catalog[e]&&(this.channels.remove(e),this.latest.remove(e),this.search.remove(e))},MSBrowser.prototype.getLastPick=function(){return this.currentSelection},MSBrowser.prototype.getSelectedOid=function(){return this.initialized?this.currentSelection?this.currentSelection.oid:null:this.initialOid},MSBrowser.prototype.parseUrl=function(){const e={},t=window.location.search?window.location.search.substring(1):null;if(t){const s=t.split("&");for(let t=0;t<s.length;t++){let n,a;-1!=s[t].indexOf("=")?(n=s[t].substring(0,s[t].indexOf("=")),a="on"==(a=s[t].substring(n.length+1))||"off"!=a&&window.decodeURIComponent(a.replace(/\+/g,"%20"))):(n=s[t],a=!0),"in_"==n.substring(0,3)?e.hasInVals=!0:"for_"==n.substring(0,4)&&(e.hasForVals=!0),e[n]=a}}return e},MSBrowser.prototype.onUrlChange=function(){const e=window.location.pathname+window.location.search;if(0===e.indexOf("/channels/")){let e=window.location.hash;e&&"#"==e[0]&&(e=e.substring(1)),e?this.channels.displayChannelBySlug(e):"self"==this.filterSpeaker?this.channels.displayPersonalChannel():this.channels.displayChannel("0"),this.changeTab("channels",!0)}else 0===e.indexOf("/latest/")?this.changeTab("latest",!0):0===e.indexOf("/search/")&&(this.search.onUrlChange(),this.changeTab("search",!0))},MSBrowser.prototype.onResize=function(){if(this.useOverlay){const e=$(window).width()-70;this.$widget.width(e);const t=$(window).height()-100;this.$widget.height(t)}},MSBrowser.prototype.loadCategories=function(){const e=this;this.msapi.ajaxCall("listCategories",{},function(t){t.data&&(e.siteSettingsCategories=t.data,e.displayCategories())})},MSTreeManager.prototype.init=function(){if(this.loaded||this.loading)return;if(!this.$place)return console.log("No place defined for tree.");if(!this.$place.length)return console.log("Place for tree doesn't exist. Requested place:",this.$place);for(this.loading=!0,window.location.search&&(this.channelsBaseUrl=this.channelsBaseUrl.substring(0,this.channelsBaseUrl.length-1)+window.location.search+"#"),this.idPrefix="";$("#"+this.idPrefix+"tree_channel_0").length>0;)this.idPrefix+="_";let e="<div>";this.displayRoot&&(e+='<div id="'+this.idPrefix+'tree_channel_0_link" '+("0"==this.currentChannelOid?'class="channel-active"':"")+">",this.onChange?e+='<button type="button" data-ref="0" class="channel-btn"'+("0"==this.currentChannelOid?'title="'+jsu.translateAttribute("Root")+" "+jsu.translateAttribute("selected")+'"':"")+">"+jsu.translateHTML("Root")+"</button>":e+='<a href="'+this.channelsBaseUrl+'" class="channel-btn"'+("0"==this.currentChannelOid?'title="'+jsu.translateAttribute("Root")+" "+jsu.translateAttribute("selected")+'"':"")+">"+jsu.translateHTML("Root")+"</a>",e+="</div>"),e+='<ul class="list js-active-item border-color-blue active" id="'+this.idPrefix+'tree_channel_0"></ul></div>',this.$widget=$(e),this.displayRoot&&this.onChange&&$(".channel-btn",this.$widget).click({obj:this},function(e){e.data.obj.onChange($(this).attr("data-ref"))});const t=this;this.loading=!1,this.loadTree("0",function(e){if(t.loaded=!0,e.success&&t.initialOid&&t.currentChannelOid==t.initialOid&&t.openTree(t.currentChannelOid),t.displayPersonal&&t.hasPersonalChannel){const e=$('<button type="button" class="button channel-personal-btn"><i class="fa fa-bookmark" aria-hidden="true"></i> <span>'+jsu.translateHTML("My channel")+"</span></button>");e.click({obj:t},function(e){e.data.obj.openPersonalChannel()}),t.$widget.prepend(e)}t.$place.empty(),t.$place.append(t.$widget),t.onTreeLoaded&&t.onTreeLoaded()})},MSTreeManager.prototype.loadTree=function(e,t){if(void 0===e)return;if(this.content[e]&&this.content[e].loaded)return void(t&&t({success:!0,oid:e}));if(this.loading)return void(this.loadingQueue[e]=t);this.loading=!0,this.content[e]||(this.content[e]={oid:e});const s={recursive:"no"};"0"!=e&&(s.parent_oid=e);const n=this,a=$("#"+this.idPrefix+"tree_channel_"+e,this.$widget);if(!a.length)return this.loading=!1,void(t&&t({success:!0,oid:e}));this.content[e].timeout=setTimeout(function(){n.content[e].timeout=null,a.css("display","block"),a.html('<li style="display: block;"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> '+jsu.translateHTML("Loading")+"...</li>")},500);const i=function(s){n._onTreeLoaded(s,e,a,t)},o=function(s,i,o){if(s.status)switch(s.status){case 401:return n._onTreeLoaded({success:!1,error:jsu.translate("Unable to get channels tree because you are not logged in.")},e,a,t);case 403:return n._onTreeLoaded({success:!1,error:jsu.translate("Unable to get channels tree because you cannot access to this channel.")},e,a,t);case 404:return n._onTreeLoaded({success:!1,error:jsu.translate("Channel does not exist.")},e,a,t);case 500:return n._onTreeLoaded({success:!1,error:jsu.translate("An error occurred in the server. Please try again later.")},e,a,t)}"timeout"==i?n._onTreeLoaded({success:!1,error:jsu.translate("Unable to get channels tree. Request timed out.")},e,a,t):"error"==i?n._onTreeLoaded({success:!1,error:jsu.translate("The server cannot be reached.")},e,a,t):n._onTreeLoaded({success:!1,error:jsu.translate("An error occurred during request:")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;"+i+" "+o},e,a,t)};this.treeUrl?$.ajax({url:this.treeUrl,data:s,dataType:"json",cache:!1,success:i,error:o}):this.msapi.ajaxCall("getChannelsTree",s,function(e){e.success?i(e):o(e.xhr,e.textStatus,e.thrownError)})},MSTreeManager.prototype._onTreeLoaded=function(e,t,s,n){let a;if(this.content[t].timeout&&(clearTimeout(this.content[t].timeout),delete this.content[t].timeout),e.success){if(e.channels){let n="";for(let s=0;s<e.channels.length;s++){const i=e.channels[s];if(i.parent_oid="0"!=t?t:"0",this.content[i.oid]){let e;for(e in i)this.content[i.oid][e]=i[e]}else this.content[i.oid]=i;this.onDataRetrieved&&this.onDataRetrieved(i);let o="";i.channels&&(o='<button type="button" aria-expanded="false" aria-controls="tree_channel_'+i.oid+'" aria-label="'+jsu.escapeAttribute(i.title)+'" data-ref="'+i.oid+'" class="channel-toggle button-text list-entry"><i class="fa fa-fw fa-angle-right" aria-hidden="true"></i></button>'),n+='<li><span id="'+this.idPrefix+"tree_channel_"+i.oid+'_link" data-ref="'+i.oid+'" class="'+(this.onChange?"":"aside-list-btn")+(this.currentChannelOid==i.oid?" channel-active":"")+'">'+o,this.onChange?n+="<button "+(i.language?'lang="'+jsu.escapeAttribute(i.language)+'"':"")+' type="button" data-ref="'+i.oid+'" class="channel-btn"'+(this.currentChannelOid==i.oid?' title="'+jsu.escapeAttribute(i.title+" "+jsu.translate("selected"))+'"':"")+">"+jsu.escapeHTML(i.title)+"</button>":n+="<a "+(i.language?'lang="'+jsu.escapeAttribute(i.language)+'"':"")+' href="'+this.channelsBaseUrl+i[this.channelsUrlField]+'" class="channel-btn">'+jsu.escapeHTML(i.title)+"</a>",n+="</span>",i.channels&&(n+='<ul class="list border-color-blue" id="'+this.idPrefix+"tree_channel_"+i.oid+'"></ul>'),n+="</li>",void 0!==this.loadingQueue[i.oid]&&(a={oid:i.oid,cb:this.loadingQueue[i.oid]},delete this.loadingQueue[i.oid])}const i=$(n);s.empty(),s.append(i),this.onChange&&$(".channel-btn",i).click({obj:this},function(e){e.data.obj.onChange($(this).attr("data-ref"))}),$(".channel-toggle",i).click({obj:this},function(e){e.stopPropagation(),e.data.obj.toggleChannel($(this).attr("data-ref"))}),$(".aside-list-btn",i).click({obj:this},function(e){e.stopPropagation(),e.data.obj.toggleChannel($(this).attr("data-ref"))})}this.content[t].loaded=!0,e.personal_channel&&(this.hasPersonalChannel=!0)}else e.error?s.html('<li class="error">'+jsu.escapeHTML(e.error)+"</li>"):s.html('<li class="error">'+jsu.translateHTML("No information about error.")+"</li>");this.loading=!1,a&&this.loadTree(a.oid,a.cb),n&&(e.oid=t,n(e))},MSTreeManager.prototype.openTree=function(e){if("0"==e)return;const t=this,s=function(){const s=[];let n=t.content[e];for(;n;)s.push(n.oid),n=t.content[n.parent_oid];s.reverse();for(let e=0;e<s.length;e++)"0"!=s[e]&&t.loadTree(s[e],function(e){$("#"+t.idPrefix+"tree_channel_"+e.oid,t.$widget).css("display","block").addClass("active"),$("#"+t.idPrefix+"tree_channel_"+e.oid+"_link .channel-toggle",t.$widget).addClass("fa-rotate-90"),$("#"+t.idPrefix+"tree_channel_"+e.oid+"_link .channel-toggle",t.$widget).attr("aria-expanded",!0)})};this.content[e]||(this.content[e]={oid:e}),void 0===this.content[e].parent_oid?this.loadPath(e,function(n){let a=[];n.path&&n.path.length>0&&(a=n.path),a.push(t.content[e]);for(let e=0;e<a.length;e++){const s=a[e];if(s.parent_oid=e>0?a[e-1].oid:"0",t.content[s.oid]){let e;for(e in s)t.content[s.oid][e]=s[e]}else t.content[s.oid]=s;t.onDataRetrieved&&t.onDataRetrieved(s)}s()}):s()},MSTreeManager.prototype.closeTree=function(e){$("#"+this.idPrefix+"tree_channel_"+e,this.$widget).css("display","none").removeClass("active"),$("#"+this.idPrefix+"tree_channel_"+e+"_link .channel-toggle",this.$widget).attr("aria-expanded",!1),$("#"+this.idPrefix+"tree_channel_"+e+"_link .channel-toggle",this.$widget).removeClass("fa-rotate-90")},MSTreeManager.prototype.toggleChannel=function(e){$("#"+this.idPrefix+"tree_channel_"+e+"_link .channel-toggle",this.$widget).hasClass("fa-rotate-90")?this.closeTree(e):this.openTree(e)},MSTreeManager.prototype.setActive=function(e){this.currentChannelOid!=e&&($(".channel-active button",this.$widget).removeAttr("title"),$(".channel-active",this.$widget).removeClass("channel-active"),this.currentChannelOid=e,$("#"+this.idPrefix+"tree_channel_"+this.currentChannelOid+"_link",this.$widget).addClass("channel-active"),$("#"+this.idPrefix+"tree_channel_"+this.currentChannelOid+"_link button",this.$widget).attr("title",$("#"+this.idPrefix+"tree_channel_"+this.currentChannelOid+"_link",this.$widget).text()+" "+jsu.translate("selected")),this.openTree(e))},MSTreeManager.prototype.loadPath=function(e,t){const s={oid:e},n=function(s){s.success||console.log("Error getting path for oid "+e+". Error: "+s.error),t(s)},a=function(s,n,a){console.log("Error getting path for oid "+e+". Error: "+n+" | "+a),t({success:!1,error:n+" | "+a})};this.pathUrl?$.ajax({url:this.pathUrl,data:s,dataType:"json",cache:!1,success:n,error:a}):this.msapi.ajaxCall("getChannelsPath",s,function(e){e.success?n(e):a(e.xhr,e.textStatus,e.thrownError)})},MSTreeManager.prototype.openPersonalChannel=function(){const e=this,t=function(t){t.success?(e.personalChannelInfo=t,$(".channel-personal-btn span",e.$widget).text(jsu.translate("My channel")),e.openTree(t.oid),e.onChange?e.onChange(t.oid):window.location.hash="#"+t.slug):$(".channel-personal-btn span",e.$widget).text(jsu.translate("My channel")+" ("+t.xhr.status+")")};this.personalChannelInfo?t(this.personalChannelInfo):this.msapi.ajaxCall("getChannelsPersonal",{},function(e){t(e)})};